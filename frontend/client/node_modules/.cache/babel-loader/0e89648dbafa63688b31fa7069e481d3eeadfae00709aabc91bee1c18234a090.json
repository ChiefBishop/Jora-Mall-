{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{BrowserRouter as Router,Routes,Route,Link,useSearchParams,useNavigate,Navigate}from'react-router-dom';// Import AuthProvider and useAuth from the dedicated AuthContext.js file\nimport{AuthProvider,useAuth}from'./AuthContext';// Import all page components\nimport ProductDetail from'./ProductDetail';import AddProduct from'./AddProduct';import EditProduct from'./EditProduct';import Register from'./Register';import Login from'./Login';import CartPage from'./CartPage';import CheckoutPage from'./CheckoutPage';import OrderConfirmationPage from'./OrderConfirmationPage';import OrderHistoryPage from'./OrderHistoryPage';import OrderManagementPage from'./OrderManagementPage';import WalletPage from'./WalletPage';// Import WalletPage\n// Add a style block for the marquee animation directly in the component.\n// In a larger project, this would typically go in your `index.css` or `App.css`.\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MarqueeStyle=()=>/*#__PURE__*/_jsx(\"style\",{children:\"\\n    @keyframes marquee {\\n      0% { transform: translateX(100%); }\\n      100% { transform: translateX(-100%); }\\n    }\\n    .animate-marquee {\\n      animation: marquee 20s linear infinite;\\n    }\\n    /* Custom scrollbar for better appearance */\\n    .scrollbar-thin::-webkit-scrollbar {\\n      height: 8px;\\n    }\\n    .scrollbar-thin::-webkit-scrollbar-track {\\n      background: #00004d; /* Dark blue from your background */\\n      border-radius: 10px;\\n    }\\n    .scrollbar-thin::-webkit-scrollbar-thumb {\\n      background: #60a5fa; /* Tailwind blue-400 */\\n      border-radius: 10px;\\n    }\\n    .scrollbar-thin::-webkit-scrollbar-thumb:hover {\\n      background: #3b82f6; /* Tailwind blue-500 */\\n    }\\n  \"});// ProtectedRoute component to control access based on authentication and roles\nconst ProtectedRoute=_ref=>{let{children,allowedRoles}=_ref;const{user,token,logout,showCustomModal}=useAuth();// Destructure necessary items from useAuth\nconst navigate=useNavigate();// Hook for navigation\n// If there's no token or user data, the user is not authenticated\nif(!token||!user){// Show a custom modal message and redirect to login\nshowCustomModal('You must be logged in to view this page.',()=>{logout();// Perform a logout to clear any stale local storage data\nnavigate('/login',{replace:true});// Redirect to login page, replacing history entry\n});return null;// Don't render children until redirect\n}// If allowedRoles are specified, check if the user's role is included\nif(allowedRoles&&(!user.role||!allowedRoles.includes(user.role))){// Show access denied message and redirect to home\nshowCustomModal('Access Denied. You do not have permission to view this page.',()=>{navigate('/',{replace:true});// Redirect to home page\n});return null;// Don't render children until redirect\n}return children;// Render the protected content if authenticated and authorized\n};// ProductList Component (serves as the Home Page)\nfunction ProductList(){const{user,logout,addToCart,cart}=useAuth();// Get user, logout, addToCart, and cart from context\nconst navigate=useNavigate();// Hook for navigation\nconst[products,setProducts]=useState([]);// State for products list\nconst[loading,setLoading]=useState(true);// State for loading indicator\nconst[error,setError]=useState(null);// State for error messages\nconst[searchTerm,setSearchTerm]=useState('');// State for search input\nconst[selectedCategory,setSelectedCategory]=useState('');// State for category filter\nconst[minPrice,setMinPrice]=useState('');// State for minimum price filter\nconst[maxPrice,setMaxPrice]=useState('');// State for maximum price filter\nconst[availableCategories,setAvailableCategories]=useState([]);// State for available categories for dropdown\nconst[totalPages,setTotalPages]=useState(1);// State for total pages in pagination\nconst[searchParams,setSearchParams]=useSearchParams();// Hook to manage URL search parameters\nconst[currentPage,setCurrentPage]=useState(1);// State for current page in pagination\n// Function to format price as Naira\nconst formatPrice=price=>{return new Intl.NumberFormat('en-NG',{style:'currency',currency:'NGN'}).format(price);};// useCallback memoizes the fetchProducts function to prevent unnecessary re-renders\nconst fetchProducts=useCallback(async()=>{const pageFromUrl=parseInt(searchParams.get('page'))||1;// Get current page from URL or default to 1\n// Update currentPage state if it differs from the URL parameter\nif(currentPage!==pageFromUrl){setCurrentPage(pageFromUrl);}setLoading(true);// Set loading to true before fetching\nsetError(null);// Clear any previous errors\ntry{const queryParams=new URLSearchParams();// Create URL search parameters\nif(searchTerm)queryParams.append('search',searchTerm);if(selectedCategory)queryParams.append('category',selectedCategory);if(minPrice)queryParams.append('minPrice',minPrice);if(maxPrice)queryParams.append('maxPrice',maxPrice);queryParams.append('page',pageFromUrl);// Append current page\nqueryParams.append('limit',12);// Define items per page\n// --- IMPORTANT: This URL is for your DEPLOYED backend ---\n// If you redeploy your backend and its URL changes, you MUST update it here.\nconst backendBaseUrl='https://jora-mall-backend.onrender.com';const url=\"\".concat(backendBaseUrl,\"/api/products?\").concat(queryParams.toString());// Construct API URL\nconst response=await fetch(url);// Fetch products\nif(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));// Throw error for non-OK responses\n}const data=await response.json();// Parse JSON response\nsetProducts(data.products);// Update products state\nsetTotalPages(data.totalPages);// Update total pages state\n}catch(err){setError(err.message);// Set error message\nconsole.error('Error in fetchProducts:',err);// Log error to console\n}finally{setLoading(false);// Set loading to false after fetch completes\n}},[searchTerm,selectedCategory,minPrice,maxPrice,searchParams,currentPage]);// Dependencies for useCallback\n// Effect to fetch products on initial render and whenever filter/search/page terms change\nuseEffect(()=>{fetchProducts();},[fetchProducts]);// Runs when fetchProducts (memoized) changes\n// Effect to fetch categories for the filter dropdown (runs once on mount)\nuseEffect(()=>{const fetchCategories=async()=>{try{// --- IMPORTANT: This URL is for your DEPLOYED backend ---\nconst backendBaseUrl='https://jora-mall-backend.onrender.com';const response=await fetch(\"\".concat(backendBaseUrl,\"/api/products\"));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();// Extract unique categories from fetched products\nconst categories=[...new Set(data.products.map(product=>product.category))];setAvailableCategories(['All',...categories]);// Add 'All' option\n}catch(err){console.error(\"Failed to fetch categories:\",err);}};fetchCategories();},[]);// Runs only once on component mount\n// Handlers for filter and search input changes\nconst handleSearchChange=e=>{setSearchTerm(e.target.value);const newSearchParams=new URLSearchParams(searchParams);newSearchParams.set('page','1');// Reset to first page on new search\nsetSearchParams(newSearchParams);};const handleCategoryChange=e=>{setSelectedCategory(e.target.value==='All'?'':e.target.value);// Set empty string for 'All'\nconst newSearchParams=new URLSearchParams(searchParams);newSearchParams.set('page','1');// Reset to first page on new filter\nsetSearchParams(newSearchParams);};const handleMinPriceChange=e=>{setMinPrice(e.target.value);const newSearchParams=new URLSearchParams(searchParams);newSearchParams.set('page','1');// Reset to first page on new filter\nsetSearchParams(newSearchParams);};const handleMaxPriceChange=e=>{setMaxPrice(e.target.value);const newSearchParams=new URLSearchParams(searchParams);newSearchParams.set('page','1');// Reset to first page on new filter\nsetSearchParams(newSearchParams);};// Handler to clear all filters\nconst handleClearFilters=()=>{setSearchTerm('');setSelectedCategory('');setMinPrice('');setMaxPrice('');setSearchParams(new URLSearchParams({page:'1'}));// Clear all params and reset to page 1\n};// Handler for page change in pagination\nconst handlePageChange=pageNumber=>{const currentPageFromUrl=parseInt(searchParams.get('page'))||1;// Only update if pageNumber is valid and different from current\nif(pageNumber>=1&&pageNumber<=totalPages&&pageNumber!==currentPageFromUrl){const newSearchParams=new URLSearchParams(searchParams);newSearchParams.set('page',pageNumber.toString());// Update page param in URL\nsetSearchParams(newSearchParams);}};// Handler for logout action\nconst handleLogout=()=>{logout();// Call logout from AuthContext\nnavigate('/login');// Redirect to login page after logout\n};// Function to render pagination page numbers\nconst renderPageNumbers=()=>{const pageNumbers=[];const maxPageButtons=5;// Maximum number of page buttons to display\nconst currentPageRender=parseInt(searchParams.get('page'))||1;// Current page for rendering UI\n// Determine the range of page numbers to show\nlet startPage=Math.max(1,currentPageRender-Math.floor(maxPageButtons/2));let endPage=Math.min(totalPages,startPage+maxPageButtons-1);// Adjust startPage if there aren't enough pages after currentPage to fill maxPageButtons\nif(endPage-startPage+1<maxPageButtons){startPage=Math.max(1,endPage-maxPageButtons+1);}for(let i=startPage;i<=endPage;i++){pageNumbers.push(/*#__PURE__*/_jsx(\"button\",{// Unique key for each button\nonClick:()=>handlePageChange(i)// Call handlePageChange on click\n,className:\"px-4 py-2 rounded-md \".concat(currentPageRender===i?'bg-blue-600 text-white':'bg-gray-200 text-gray-700 hover:bg-gray-300',\" transition-colors duration-200\"),children:i},i));}return pageNumbers;};// Display error message if fetching products fails\nif(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen flex items-center justify-center bg-[#000080] text-red-700 p-4 rounded-lg shadow-md m-4 flex-col\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:\"Error:\"}),\" \",/*#__PURE__*/_jsx(\"p\",{className:\"ml-2\",children:error}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:\"Please ensure your backend server is running at `https://jora-mall-backend.onrender.com` or your MongoDB URI is correct.\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"mt-4 text-blue-700 hover:underline\",children:\"Retry Home\"})]});}// Slice products for \"Top Selling Products\" section (first 8 for now)\nconst topSellingProducts=products.slice(0,8);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-[#000080] text-white font-inter\",children:[/*#__PURE__*/_jsx(MarqueeStyle,{}),\" \",/*#__PURE__*/_jsxs(\"header\",{className:\"text-center py-8 bg-gradient-to-r from-blue-800 to-indigo-900 rounded-b-xl shadow-lg mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-extrabold text-white tracking-tight\",children:\"Jora Mall\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-blue-200 mt-2\",children:\"Jora Mall - Where Convenience Meets Quality.\"}),/*#__PURE__*/_jsxs(\"nav\",{className:\"mt-4 flex flex-wrap justify-center space-x-2 sm:space-x-4 items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"inline-block bg-indigo-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-indigo-600 transition-colors duration-300 shadow-md\",children:\"Home\"}),user&&user.role==='admin'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/add-product\",className:\"inline-block bg-green-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-green-600 transition-colors duration-300 shadow-md\",children:\"Add New Product\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/orders\",className:\"inline-block bg-orange-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-orange-600 transition-colors duration-300 shadow-md\",children:\"Manage Orders (Admin)\"})]}),user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"py-2 px-4 text-yellow-100\",children:[\"Welcome, \",user.username,\"!\"]}),/*#__PURE__*/_jsx(Link,{to:\"/my-orders\",className:\"inline-block bg-purple-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-purple-600 transition-colors duration-300 shadow-md\",children:\"My Orders\"}),/*#__PURE__*/_jsxs(Link,{to:\"/wallet\",className:\"inline-block bg-teal-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-teal-600 transition-colors duration-300 shadow-md flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"My Wallet\"}),user.walletBalance!==undefined&&/*#__PURE__*/_jsx(\"span\",{className:\"bg-teal-700 px-2 py-1 rounded-full text-xs font-bold\",children:formatPrice(user.walletBalance)})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"inline-block bg-red-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-red-600 transition-colors duration-300 shadow-md\",children:\"Logout\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"inline-block bg-blue-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-blue-600 transition-colors duration-300 shadow-md\",children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"inline-block bg-purple-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-purple-600 transition-colors duration-300 shadow-md\",children:\"Register\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-blue-100 space-x-1 ml-4 sm:ml-6 py-2 px-2 sm:px-4 rounded-lg bg-blue-700 shadow-md\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"})}),/*#__PURE__*/_jsx(\"a\",{href:\"tel:+2348027035316\",className:\"text-white hover:underline\",children:\"+234 8027035316\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-blue-100 ml-2 sm:ml-4 py-2 px-2 sm:px-4 rounded-lg bg-blue-700 shadow-md\",children:[\"Support hotline: \",/*#__PURE__*/_jsx(\"a\",{href:\"mailto:Support@retailshopping.com\",className:\"text-white hover:underline\",children:\"Support@retailshopping.com\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/cart\",className:\"relative inline-flex items-center bg-yellow-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-yellow-600 transition-colors duration-300 shadow-md\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 hidden sm:inline\",children:\"Cart\"}),cart.items&&cart.items.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center\",children:cart.items.length})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-400 text-gray-900 py-2 px-4 overflow-hidden shadow-inner text-sm font-semibold whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"inline-block animate-marquee\",children:[\"Never pay more than the Jora Mall prize!! Questions or concerns? Contact \",/*#__PURE__*/_jsx(\"a\",{href:\"mailto:support@retailshopping.com\",className:\"text-blue-700 hover:underline\",children:\"support@retailshopping.com\"})]})}),/*#__PURE__*/_jsxs(\"main\",{className:\"container mx-auto px-4 py-8\",children:[topSellingProducts.length>0&&/*#__PURE__*/_jsxs(\"section\",{className:\"mb-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-white mb-6 text-center\",children:\"\\uD83D\\uDD25 Top Selling Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex overflow-x-auto pb-4 space-x-6 scrollbar-thin scrollbar-thumb-blue-400 scrollbar-track-blue-900\",children:topSellingProducts.map(product=>/*#__PURE__*/// Link to product detail page\n_jsx(Link,{to:\"/product/\".concat(product._id),className:\"flex-shrink-0 w-64\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-indigo-600 to-blue-700 text-white rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden transform hover:-translate-y-2 h-full flex flex-col\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,alt:product.name,className:\"w-full h-40 object-cover rounded-t-xl\"// Fallback for broken images\n,onError:e=>{e.target.onerror=null;e.target.src='https://placehold.co/400x300/E0E0E0/333333?text=Image+Not+Found';}}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 flex-grow flex flex-col\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-1 truncate\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-100 mb-2 line-clamp-2\",children:product.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-auto pt-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-yellow-300\",children:formatPrice(product.price)}),\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-blue-200\",children:[\"Stock: \",product.stock]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.preventDefault();// Prevent navigation from the Link component\n// --- DEBUGGING LOG ---\nconsole.log('Attempting to add product to cart from ProductList:',{productId:product._id,quantity:1,name:product.name,imageUrl:product.imageUrl,price:product.price});// --- END DEBUGGING LOG ---\n// Ensure product ID and details are valid before adding to cart\nif(product&&product._id){addToCart(product._id,1,{// Pass product details for local cart\nname:product.name,imageUrl:product.imageUrl,price:product.price});}else{console.error('Attempted to add to cart with invalid product data from ProductList:',product);}},className:\"mt-4 w-full bg-green-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-green-600 transition-colors duration-300 shadow-md\",children:\"Add to Cart\"})]})]})},product._id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-8 flex flex-col md:flex-row md:items-end md:space-x-4 space-y-4 md:space-y-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"search\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Search Products\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"search\",placeholder:\"Search by name or description...\",value:searchTerm,onChange:handleSearchChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Category\"}),/*#__PURE__*/_jsx(\"select\",{id:\"category\",value:selectedCategory,onChange:handleCategoryChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",children:availableCategories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat==='All'?'':cat,children:cat},cat))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"minPrice\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Min Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"minPrice\",placeholder:\"Min\",value:minPrice,onChange:handleMinPriceChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"maxPrice\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Max Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"maxPrice\",placeholder:\"Max\",value:maxPrice,onChange:handleMaxPriceChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClearFilters,className:\"w-full md:w-auto bg-gray-300 text-gray-800 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-300 shadow-sm\",children:\"Clear Filters\"})]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center py-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500\"}),/*#__PURE__*/_jsx(\"p\",{className:\"ml-4 text-lg text-white\",children:\"Fetching products...\"})]}):products.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-blue-100 text-xl py-10\",children:\"No products found matching your criteria. Try adjusting your search or filters.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\",children:products.map(product=>/*#__PURE__*/// Link to individual product detail page\n_jsx(Link,{to:\"/product/\".concat(product._id),className:\"block\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 overflow-hidden flex flex-col h-full\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,alt:product.name,className:\"w-full h-48 object-cover rounded-t-xl\",onError:e=>{e.target.onerror=null;e.target.src='https://placehold.co/400x300/E0E0E0/333333?text=Image+Not+Found';}}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 flex-grow flex flex-col\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800 mb-2\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 text-sm mb-3 flex-grow\",children:[product.description.substring(0,100),\"...\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-auto pt-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-blue-600\",children:formatPrice(product.price)}),\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[\"Stock: \",product.stock]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.preventDefault();// Prevent navigation when \"Add to Cart\" button is clicked\n// --- DEBUGGING LOG ---\nconsole.log('Attempting to add product to cart from ProductList (grid):',{productId:product._id,quantity:1,name:product.name,imageUrl:product.imageUrl,price:product.price});// --- END DEBUGGING LOG ---\nif(product&&product._id){addToCart(product._id,1,{// Pass product details for local cart\nname:product.name,imageUrl:product.imageUrl,price:product.price});}else{console.error('Attempted to add to cart with invalid product data from ProductList (grid):',product);}},className:\"mt-4 w-full bg-green-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-green-600 transition-colors duration-300 shadow-md\",children:\"Add to Cart\"})]})]})},product._id))}),totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center space-x-2 mt-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange((parseInt(searchParams.get('page'))||1)-1),disabled:(parseInt(searchParams.get('page'))||1)===1,className:\"px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200\",children:\"Previous\"}),renderPageNumbers(),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange((parseInt(searchParams.get('page'))||1)+1),disabled:(parseInt(searchParams.get('page'))||1)===totalPages,className:\"px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200\",children:\"Next\"})]})]})]}),/*#__PURE__*/_jsx(\"section\",{className:\"bg-white text-red-700 py-12 px-4 mt-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto grid grid-cols-1 md:grid-cols-4 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4 text-red-500\",children:\"Explore Jora Mall\"}),\" \",/*#__PURE__*/_jsxs(\"ul\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/products?category=Smartphones\",className:\"text-red-700 hover:text-red-500 transition-colors\",children:\"Smart Phones\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/products?category=Designer shoes\",className:\"text-red-700 hover:text-red-500 transition-colors\",children:\"Designer Shoes\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/products?category=Jackets\",className:\"text-red-700 hover:text-red-500 transition-colors\",children:\"Jackets\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/products?category=Sweatshirt\",className:\"text-red-700 hover:text-red-500 transition-colors\",children:\"Sweatshirt\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-red-700 hover:text-red-500 transition-colors\",children:\"All Products\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4 text-red-500\",children:\"Terms and Conditions\"}),\" \",/*#__PURE__*/_jsxs(\"ul\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/cookie-policy\",className:\"text-red-700 hover:text-red-500 transition-colors\",children:\"Cookie Policy\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/data-privacy-statement\",className:\"text-red-700 hover:text-red-500 transition-colors\",children:\"Data Privacy Statement\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/website-usage-policy\",className:\"text-red-700 hover:text-red-500 transition-colors\",children:\"Website Usage Policy\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4 text-red-500\",children:\"Contact Us\"}),\" \",/*#__PURE__*/_jsxs(\"p\",{className:\"leading-relaxed\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Head Office:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"Jora Estate, Victoria Island,\",/*#__PURE__*/_jsx(\"br\",{}),\"Lagos, Nigeria.\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Telephone:\"}),\" \",/*#__PURE__*/_jsx(\"a\",{href:\"tel:+2348027035316\",className:\"text-red-700 hover:text-red-500 transition-colors\",children:\"+234 8027035316\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",/*#__PURE__*/_jsx(\"a\",{href:\"mailto:support@retailshopping.com\",className:\"text-red-700 hover:text-red-500 transition-colors\",children:\"support@retailshopping.com\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4 text-red-500\",children:\"Follow Us\"}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"https://wa.me/2348027035316\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-red-700 hover:text-green-500 transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{role:\"img\",viewBox:\"0 0 24 24\",fill:\"currentColor\",className:\"w-8 h-8\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12.04 2c-5.46 0-9.9 4.44-9.9 9.9 0 1.77.47 3.45 1.38 4.9L2.05 22l5.03-1.32c1.4-.76 2.97-1.16 4.56-1.16 5.46 0 9.9-4.44 9.9-9.9S17.5 2 12.04 2zM17.3 15.68c-.19.34-.78.37-1.14.19-.36-.19-1.05-.43-1.47-.59-.42-.16-.72-.12-1.02.32-.3.44-1.17 1.54-1.42 1.83-.26.3-.51.34-.95.12-.44-.22-1.54-.57-2.93-1.81-1.08-.94-1.8-2.16-2-2.5a.6.6 0 01-.19-.44c0-.16.2-.38.45-.63.2-.23.44-.57.65-.85.2-.28.27-.47.18-.65-.08-.19-.72-1.74-1-2.45-.28-.7-.48-.59-.65-.6-.16-.01-.35-.02-.54-.02-.2 0-.52.07-.79.37-.27.3-.87 1.05-.87 2.56S6.9 16.33 7.3 16.92c.4.6 1.48 2.3 3.59 3.12 1.7 1 3.23 1.25 4.3 1.13 1.07-.12 2.36-.96 2.76-1.57.4-.6.4-1.1.2-1.42-.19-.32-.7-.49-1.05-.67z\"})})}),/*#__PURE__*/_jsx(\"a\",{href:\"https://www.facebook.com/joramall\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-red-700 hover:text-blue-500 transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{role:\"img\",viewBox:\"0 0 24 24\",fill:\"currentColor\",className:\"w-8 h-8\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.33 8.89 7.77 9.88V14.89h-2.54V12h2.54V9.79c0-2.51 1.49-3.9 3.77-3.9 1.09 0 2.24.19 2.24.19v2.46h-1.26c-1.24 0-1.63.77-1.63 1.56V12h2.78l-.45 2.89H13.5V22C17.47 21.14 22 17.16 22 12z\"})})}),/*#__PURE__*/_jsx(\"a\",{href:\"https://www.instagram.com/joramall\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-red-700 hover:text-pink-500 transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{role:\"img\",viewBox:\"0 0 24 24\",fill:\"currentColor\",className:\"w-8 h-8\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 2c3.232 0 3.655.012 4.908.071 1.242.059 2.058.261 2.716.536.702.29 1.257.652 1.84 1.235.584.584.945 1.14 1.235 1.84.275.658.477 1.474.536 2.716.059 1.253.071 1.676.071 4.908s-.012 3.655-.071 4.908c-.059 1.242-.261 2.058-.536 2.716-.29.702-.652 1.257-1.235 1.84-.584.584-1.14.945-1.235 1.84-.275.658-.477 1.474-.536 2.716-.059 1.253-.071 1.676-.071 4.908s.012-3.655.071-4.908c.059-1.242.261-2.058.536-2.716.29-.702.652-1.257 1.235-1.84.584-.584 1.14-.945 1.84-1.235.658-.275 1.474-.477 2.716-.536C8.345 2.012 8.768 2 12 2zm0 2.474c-3.136 0-3.535.012-4.764.066-1.173.056-1.928.243-2.385.433-.497.199-.865.485-1.229.849-.364.364-.65.732-.849 1.229-.19.457-.377 1.212-.433 2.385-.054 1.23-.066 1.628-.066 4.764s.012 3.535.066 4.764c.056 1.173.243 1.928.433 2.385.199.497.485.865.849 1.229.364.364.732.65 1.229.849.457.19 1.212.377 2.385.433 1.23.054 1.628.066 4.764.066s3.535-.012 4.764-.066c1.173-.056 1.928-.243 2.385-.433.497-.199.865-.485 1.229-.849.364-.364.732-.65-.849-1.229-.457-.19-1.212-.377-2.385-.433-1.23-.054-1.628-.066-4.764-.066zm0 3.651c-3.411 0-6.192 2.781-6.192 6.192s2.781 6.192 6.192 6.192 6.192-2.781 6.192-6.192-2.781-6.192-6.192-6.192zm0 2.474a3.718 3.718 0 100 7.436 3.718 3.718 0 000-7.436zm6.335-3.327a1.474 1.474 0 110 2.948 1.474 1.474 0 010-2.948z\"})})}),/*#__PURE__*/_jsx(\"a\",{href:\"https://x.com/joramall\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-red-700 hover:text-blue-400 transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{role:\"img\",viewBox:\"0 0 24 24\",fill:\"currentColor\",className:\"w-8 h-8\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M18.901 1.153h3.682L15.344 8.441l8.529 11.408H20.4L13.882 12.3l-6.84 7.551H2.387l7.551-8.354L1.13 1.153h3.811L11.5 7.086l6.899-5.933zM16.947 18.309H15.02L5.051 4.118H6.883L16.947 18.309z\"})})})]})]})]})}),/*#__PURE__*/_jsx(\"footer\",{className:\"text-center py-6 bg-white text-red-700 text-sm\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\xA9 \",new Date().getFullYear(),\" Jora Mall. All rights reserved.\"]})})]});}// Main App component responsible for overall application structure and routing\nfunction App(){return/*#__PURE__*/_jsxs(Router,{children:[\" \",/*#__PURE__*/_jsxs(AuthProvider,{children:[\" \",/*#__PURE__*/_jsxs(Routes,{children:[\" \",/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProductList,{})}),\" \",/*#__PURE__*/_jsx(Route,{path:\"/product/:id\",element:/*#__PURE__*/_jsx(ProductDetail,{})}),\" \",/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),\" \",/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),\" \",/*#__PURE__*/_jsx(Route,{path:\"/cart\",element:/*#__PURE__*/_jsx(CartPage,{})}),\" \",/*#__PURE__*/_jsx(Route,{path:\"/cookie-policy\",element:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-white text-red-700 flex items-center justify-center text-center text-4xl font-bold\",children:[\"Cookie Policy Page\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-blue-500 hover:underline text-lg mt-4\",children:\"Go to Home\"})]})}),/*#__PURE__*/_jsx(Route,{path:\"/data-privacy-statement\",element:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-white text-red-700 flex items-center justify-center text-center text-4xl font-bold\",children:[\"Data Privacy Statement Page\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-blue-500 hover:underline text-lg mt-4\",children:\"Go to Home\"})]})}),/*#__PURE__*/_jsx(Route,{path:\"/website-usage-policy\",element:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-white text-red-700 flex items-center justify-center text-center text-4xl font-bold\",children:[\"Website Usage Policy Page\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-blue-500 hover:underline text-lg mt-4\",children:\"Go to Home\"})]})}),/*#__PURE__*/_jsx(Route,{path:\"/products\",element:/*#__PURE__*/_jsx(ProductList,{})}),/*#__PURE__*/_jsx(Route,{path:\"/checkout\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(CheckoutPage,{})})}),\" \",/*#__PURE__*/_jsx(Route,{path:\"/order-confirmation\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(OrderConfirmationPage,{})})}),\" \",/*#__PURE__*/_jsx(Route,{path:\"/my-orders\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(OrderHistoryPage,{})})}),\" \",/*#__PURE__*/_jsx(Route,{path:\"/wallet\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(WalletPage,{})})}),\" \",/*#__PURE__*/_jsx(Route,{path:\"/add-product\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{allowedRoles:['admin'],children:[/*#__PURE__*/_jsx(AddProduct,{}),\" \"]})}),/*#__PURE__*/_jsx(Route,{path:\"/edit-product/:id\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{allowedRoles:['admin'],children:[/*#__PURE__*/_jsx(EditProduct,{}),\" \"]})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/orders\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{allowedRoles:['admin'],children:[/*#__PURE__*/_jsx(OrderManagementPage,{}),\" \"]})})]})]})]});}export default App;// Export the main App component","map":{"version":3,"names":["React","useState","useEffect","useCallback","BrowserRouter","Router","Routes","Route","Link","useSearchParams","useNavigate","Navigate","AuthProvider","useAuth","ProductDetail","AddProduct","EditProduct","Register","Login","CartPage","CheckoutPage","OrderConfirmationPage","OrderHistoryPage","OrderManagementPage","WalletPage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MarqueeStyle","children","ProtectedRoute","_ref","allowedRoles","user","token","logout","showCustomModal","navigate","replace","role","includes","ProductList","addToCart","cart","products","setProducts","loading","setLoading","error","setError","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","minPrice","setMinPrice","maxPrice","setMaxPrice","availableCategories","setAvailableCategories","totalPages","setTotalPages","searchParams","setSearchParams","currentPage","setCurrentPage","formatPrice","price","Intl","NumberFormat","style","currency","format","fetchProducts","pageFromUrl","parseInt","get","queryParams","URLSearchParams","append","backendBaseUrl","url","concat","toString","response","fetch","ok","Error","status","data","json","err","message","console","fetchCategories","categories","Set","map","product","category","handleSearchChange","e","target","value","newSearchParams","set","handleCategoryChange","handleMinPriceChange","handleMaxPriceChange","handleClearFilters","page","handlePageChange","pageNumber","currentPageFromUrl","handleLogout","renderPageNumbers","pageNumbers","maxPageButtons","currentPageRender","startPage","Math","max","floor","endPage","min","i","push","onClick","className","to","topSellingProducts","slice","username","walletBalance","undefined","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","href","items","length","_id","src","imageUrl","alt","name","onError","onerror","description","stock","preventDefault","log","productId","quantity","htmlFor","type","id","placeholder","onChange","cat","substring","disabled","rel","Date","getFullYear","App","path","element"],"sources":["C:/Users/HP/OneDrive/Desktop/SUCCESSFUL PROJECTS/Jora mall/frontend/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, Link, useSearchParams, useNavigate, Navigate } from 'react-router-dom';\r\n\r\n// Import AuthProvider and useAuth from the dedicated AuthContext.js file\r\nimport { AuthProvider, useAuth } from './AuthContext';\r\n\r\n// Import all page components\r\nimport ProductDetail from './ProductDetail';\r\nimport AddProduct from './AddProduct';\r\nimport EditProduct from './EditProduct';\r\nimport Register from './Register';\r\nimport Login from './Login';\r\nimport CartPage from './CartPage';\r\nimport CheckoutPage from './CheckoutPage';\r\nimport OrderConfirmationPage from './OrderConfirmationPage';\r\nimport OrderHistoryPage from './OrderHistoryPage';\r\nimport OrderManagementPage from './OrderManagementPage';\r\nimport WalletPage from './WalletPage'; // Import WalletPage\r\n\r\n\r\n// Add a style block for the marquee animation directly in the component.\r\n// In a larger project, this would typically go in your `index.css` or `App.css`.\r\nconst MarqueeStyle = () => (\r\n  <style>{`\r\n    @keyframes marquee {\r\n      0% { transform: translateX(100%); }\r\n      100% { transform: translateX(-100%); }\r\n    }\r\n    .animate-marquee {\r\n      animation: marquee 20s linear infinite;\r\n    }\r\n    /* Custom scrollbar for better appearance */\r\n    .scrollbar-thin::-webkit-scrollbar {\r\n      height: 8px;\r\n    }\r\n    .scrollbar-thin::-webkit-scrollbar-track {\r\n      background: #00004d; /* Dark blue from your background */\r\n      border-radius: 10px;\r\n    }\r\n    .scrollbar-thin::-webkit-scrollbar-thumb {\r\n      background: #60a5fa; /* Tailwind blue-400 */\r\n      border-radius: 10px;\r\n    }\r\n    .scrollbar-thin::-webkit-scrollbar-thumb:hover {\r\n      background: #3b82f6; /* Tailwind blue-500 */\r\n    }\r\n  `}</style>\r\n);\r\n\r\n\r\n// ProtectedRoute component to control access based on authentication and roles\r\nconst ProtectedRoute = ({ children, allowedRoles }) => {\r\n  const { user, token, logout, showCustomModal } = useAuth(); // Destructure necessary items from useAuth\r\n  const navigate = useNavigate(); // Hook for navigation\r\n\r\n  // If there's no token or user data, the user is not authenticated\r\n  if (!token || !user) {\r\n    // Show a custom modal message and redirect to login\r\n    showCustomModal('You must be logged in to view this page.', () => {\r\n      logout(); // Perform a logout to clear any stale local storage data\r\n      navigate('/login', { replace: true }); // Redirect to login page, replacing history entry\r\n    });\r\n    return null; // Don't render children until redirect\r\n  }\r\n\r\n  // If allowedRoles are specified, check if the user's role is included\r\n  if (allowedRoles && (!user.role || !allowedRoles.includes(user.role))) {\r\n    // Show access denied message and redirect to home\r\n    showCustomModal('Access Denied. You do not have permission to view this page.', () => {\r\n      navigate('/', { replace: true }); // Redirect to home page\r\n    });\r\n    return null; // Don't render children until redirect\r\n  }\r\n\r\n  return children; // Render the protected content if authenticated and authorized\r\n};\r\n\r\n\r\n// ProductList Component (serves as the Home Page)\r\nfunction ProductList() {\r\n  const { user, logout, addToCart, cart } = useAuth(); // Get user, logout, addToCart, and cart from context\r\n  const navigate = useNavigate(); // Hook for navigation\r\n  const [products, setProducts] = useState([]); // State for products list\r\n  const [loading, setLoading] = useState(true); // State for loading indicator\r\n  const [error, setError] = useState(null); // State for error messages\r\n  const [searchTerm, setSearchTerm] = useState(''); // State for search input\r\n  const [selectedCategory, setSelectedCategory] = useState(''); // State for category filter\r\n  const [minPrice, setMinPrice] = useState(''); // State for minimum price filter\r\n  const [maxPrice, setMaxPrice] = useState(''); // State for maximum price filter\r\n  const [availableCategories, setAvailableCategories] = useState([]); // State for available categories for dropdown\r\n  const [totalPages, setTotalPages] = useState(1); // State for total pages in pagination\r\n  const [searchParams, setSearchParams] = useSearchParams(); // Hook to manage URL search parameters\r\n  const [currentPage, setCurrentPage] = useState(1); // State for current page in pagination\r\n\r\n  // Function to format price as Naira\r\n  const formatPrice = (price) => {\r\n    return new Intl.NumberFormat('en-NG', { style: 'currency', currency: 'NGN' }).format(price);\r\n  };\r\n\r\n  // useCallback memoizes the fetchProducts function to prevent unnecessary re-renders\r\n  const fetchProducts = useCallback(async () => {\r\n    const pageFromUrl = parseInt(searchParams.get('page')) || 1; // Get current page from URL or default to 1\r\n    // Update currentPage state if it differs from the URL parameter\r\n    if (currentPage !== pageFromUrl) {\r\n      setCurrentPage(pageFromUrl);\r\n    }\r\n\r\n    setLoading(true); // Set loading to true before fetching\r\n    setError(null); // Clear any previous errors\r\n    try {\r\n      const queryParams = new URLSearchParams(); // Create URL search parameters\r\n      if (searchTerm) queryParams.append('search', searchTerm);\r\n      if (selectedCategory) queryParams.append('category', selectedCategory);\r\n      if (minPrice) queryParams.append('minPrice', minPrice);\r\n      if (maxPrice) queryParams.append('maxPrice', maxPrice);\r\n      queryParams.append('page', pageFromUrl); // Append current page\r\n      queryParams.append('limit', 12); // Define items per page\r\n\r\n      // --- IMPORTANT: This URL is for your DEPLOYED backend ---\r\n      // If you redeploy your backend and its URL changes, you MUST update it here.\r\n      const backendBaseUrl = 'https://jora-mall-backend.onrender.com';\r\n      const url = `${backendBaseUrl}/api/products?${queryParams.toString()}`; // Construct API URL\r\n      const response = await fetch(url); // Fetch products\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`); // Throw error for non-OK responses\r\n      }\r\n      const data = await response.json(); // Parse JSON response\r\n      setProducts(data.products); // Update products state\r\n      setTotalPages(data.totalPages); // Update total pages state\r\n    } catch (err) {\r\n      setError(err.message); // Set error message\r\n      console.error('Error in fetchProducts:', err); // Log error to console\r\n    } finally {\r\n      setLoading(false); // Set loading to false after fetch completes\r\n    }\r\n  }, [searchTerm, selectedCategory, minPrice, maxPrice, searchParams, currentPage]); // Dependencies for useCallback\r\n\r\n  // Effect to fetch products on initial render and whenever filter/search/page terms change\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, [fetchProducts]); // Runs when fetchProducts (memoized) changes\r\n\r\n  // Effect to fetch categories for the filter dropdown (runs once on mount)\r\n  useEffect(() => {\r\n    const fetchCategories = async () => {\r\n      try {\r\n        // --- IMPORTANT: This URL is for your DEPLOYED backend ---\r\n        const backendBaseUrl = 'https://jora-mall-backend.onrender.com';\r\n        const response = await fetch(`${backendBaseUrl}/api/products`);\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const data = await response.json();\r\n        // Extract unique categories from fetched products\r\n        const categories = [...new Set(data.products.map(product => product.category))];\r\n        setAvailableCategories(['All', ...categories]); // Add 'All' option\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch categories:\", err);\r\n      }\r\n    };\r\n    fetchCategories();\r\n  }, []); // Runs only once on component mount\r\n\r\n  // Handlers for filter and search input changes\r\n  const handleSearchChange = (e) => {\r\n    setSearchTerm(e.target.value);\r\n    const newSearchParams = new URLSearchParams(searchParams);\r\n    newSearchParams.set('page', '1'); // Reset to first page on new search\r\n    setSearchParams(newSearchParams);\r\n  };\r\n\r\n  const handleCategoryChange = (e) => {\r\n    setSelectedCategory(e.target.value === 'All' ? '' : e.target.value); // Set empty string for 'All'\r\n    const newSearchParams = new URLSearchParams(searchParams);\r\n    newSearchParams.set('page', '1'); // Reset to first page on new filter\r\n    setSearchParams(newSearchParams);\r\n  };\r\n\r\n  const handleMinPriceChange = (e) => {\r\n    setMinPrice(e.target.value);\r\n    const newSearchParams = new URLSearchParams(searchParams);\r\n    newSearchParams.set('page', '1'); // Reset to first page on new filter\r\n    setSearchParams(newSearchParams);\r\n  };\r\n\r\n  const handleMaxPriceChange = (e) => {\r\n    setMaxPrice(e.target.value);\r\n    const newSearchParams = new URLSearchParams(searchParams);\r\n    newSearchParams.set('page', '1'); // Reset to first page on new filter\r\n    setSearchParams(newSearchParams);\r\n  };\r\n\r\n  // Handler to clear all filters\r\n  const handleClearFilters = () => {\r\n    setSearchTerm('');\r\n    setSelectedCategory('');\r\n    setMinPrice('');\r\n    setMaxPrice('');\r\n    setSearchParams(new URLSearchParams({ page: '1' })); // Clear all params and reset to page 1\r\n  };\r\n\r\n  // Handler for page change in pagination\r\n  const handlePageChange = (pageNumber) => {\r\n    const currentPageFromUrl = parseInt(searchParams.get('page')) || 1;\r\n    // Only update if pageNumber is valid and different from current\r\n    if (pageNumber >= 1 && pageNumber <= totalPages && pageNumber !== currentPageFromUrl) {\r\n      const newSearchParams = new URLSearchParams(searchParams);\r\n      newSearchParams.set('page', pageNumber.toString()); // Update page param in URL\r\n      setSearchParams(newSearchParams);\r\n    }\r\n  };\r\n\r\n  // Handler for logout action\r\n  const handleLogout = () => {\r\n    logout(); // Call logout from AuthContext\r\n    navigate('/login'); // Redirect to login page after logout\r\n  };\r\n\r\n  // Function to render pagination page numbers\r\n  const renderPageNumbers = () => {\r\n    const pageNumbers = [];\r\n    const maxPageButtons = 5; // Maximum number of page buttons to display\r\n    const currentPageRender = parseInt(searchParams.get('page')) || 1; // Current page for rendering UI\r\n\r\n    // Determine the range of page numbers to show\r\n    let startPage = Math.max(1, currentPageRender - Math.floor(maxPageButtons / 2));\r\n    let endPage = Math.min(totalPages, startPage + maxPageButtons - 1);\r\n\r\n    // Adjust startPage if there aren't enough pages after currentPage to fill maxPageButtons\r\n    if (endPage - startPage + 1 < maxPageButtons) {\r\n      startPage = Math.max(1, endPage - maxPageButtons + 1);\r\n    }\r\n\r\n    for (let i = startPage; i <= endPage; i++) {\r\n      pageNumbers.push(\r\n        <button\r\n          key={i} // Unique key for each button\r\n          onClick={() => handlePageChange(i)} // Call handlePageChange on click\r\n          className={`px-4 py-2 rounded-md ${currentPageRender === i ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'} transition-colors duration-200`}\r\n        >\r\n          {i}\r\n        </button>\r\n      );\r\n    }\r\n    return pageNumbers;\r\n  };\r\n\r\n  // Display error message if fetching products fails\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-[#000080] text-red-700 p-4 rounded-lg shadow-md m-4 flex-col\">\r\n        <p className=\"font-bold\">Error:</p> <p className=\"ml-2\">{error}</p>\r\n        <p className=\"mt-2\">Please ensure your backend server is running at `https://jora-mall-backend.onrender.com` or your MongoDB URI is correct.</p>\r\n        <Link to=\"/\" className=\"mt-4 text-blue-700 hover:underline\">Retry Home</Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Slice products for \"Top Selling Products\" section (first 8 for now)\r\n  const topSellingProducts = products.slice(0, 8);\r\n\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#000080] text-white font-inter\">\r\n      <MarqueeStyle /> {/* Include the style block for marquee animation */}\r\n\r\n      {/* Header section with site title and navigation */}\r\n      <header className=\"text-center py-8 bg-gradient-to-r from-blue-800 to-indigo-900 rounded-b-xl shadow-lg mb-8\">\r\n        <h1 className=\"text-4xl font-extrabold text-white tracking-tight\">Jora Mall</h1>\r\n        {/* Updated Slogan */}\r\n        <p className=\"text-xl text-blue-200 mt-2\">Jora Mall - Where Convenience Meets Quality.</p>\r\n        <nav className=\"mt-4 flex flex-wrap justify-center space-x-2 sm:space-x-4 items-center\">\r\n          <Link\r\n            to=\"/\"\r\n            className=\"inline-block bg-indigo-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-indigo-600 transition-colors duration-300 shadow-md\"\r\n          >\r\n            Home\r\n          </Link>\r\n          {/* Admin specific navigation links */}\r\n          {user && user.role === 'admin' && (\r\n            <>\r\n              <Link\r\n                to=\"/add-product\"\r\n                className=\"inline-block bg-green-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-green-600 transition-colors duration-300 shadow-md\"\r\n              >\r\n                Add New Product\r\n              </Link>\r\n              <Link\r\n                to=\"/admin/orders\"\r\n                className=\"inline-block bg-orange-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-orange-600 transition-colors duration-300 shadow-md\"\r\n              >\r\n                Manage Orders (Admin)\r\n              </Link>\r\n            </>\r\n          )}\r\n          {/* Conditional rendering for logged-in vs. logged-out users */}\r\n          {user ? (\r\n            <>\r\n              {/* Welcome message for logged-in user */}\r\n              <span className=\"py-2 px-4 text-yellow-100\">Welcome, {user.username}!</span>\r\n              {/* Link to user's orders */}\r\n              <Link\r\n                to=\"/my-orders\"\r\n                className=\"inline-block bg-purple-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-purple-600 transition-colors duration-300 shadow-md\"\r\n              >\r\n                My Orders\r\n              </Link>\r\n              {/* NEW: Link to Wallet Page with visible balance */}\r\n              <Link\r\n                to=\"/wallet\"\r\n                className=\"inline-block bg-teal-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-teal-600 transition-colors duration-300 shadow-md flex items-center space-x-2\"\r\n              >\r\n                <span>My Wallet</span>\r\n                {/* Display wallet balance if available */}\r\n                {user.walletBalance !== undefined && (\r\n                  <span className=\"bg-teal-700 px-2 py-1 rounded-full text-xs font-bold\">\r\n                    {formatPrice(user.walletBalance)}\r\n                  </span>\r\n                )}\r\n              </Link>\r\n              {/* Logout button */}\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"inline-block bg-red-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-red-600 transition-colors duration-300 shadow-md\"\r\n              >\r\n                Logout\r\n              </button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              {/* Links for login and registration if not logged in */}\r\n              <Link\r\n                to=\"/login\"\r\n                className=\"inline-block bg-blue-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-blue-600 transition-colors duration-300 shadow-md\"\r\n              >\r\n                Login\r\n              </Link>\r\n              <Link\r\n                to=\"/register\"\r\n                className=\"inline-block bg-purple-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-purple-600 transition-colors duration-300 shadow-md\"\r\n              >\r\n                Register\r\n              </Link>\r\n            </>\r\n          )}\r\n\r\n          {/* Phone Icon and Number */}\r\n          <div className=\"flex items-center text-blue-100 space-x-1 ml-4 sm:ml-6 py-2 px-2 sm:px-4 rounded-lg bg-blue-700 shadow-md\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" />\r\n            </svg>\r\n            <a href=\"tel:+2348027035316\" className=\"text-white hover:underline\">+234 8027035316</a>\r\n          </div>\r\n\r\n          {/* Support Hotline */}\r\n          <div className=\"text-blue-100 ml-2 sm:ml-4 py-2 px-2 sm:px-4 rounded-lg bg-blue-700 shadow-md\">\r\n            Support hotline: <a href=\"mailto:Support@retailshopping.com\" className=\"text-white hover:underline\">Support@retailshopping.com</a>\r\n          </div>\r\n\r\n          {/* Cart Icon - ALWAYS VISIBLE, shows item count from the active cart state */}\r\n          <Link\r\n            to=\"/cart\"\r\n            className=\"relative inline-flex items-center bg-yellow-500 text-white py-2 px-4 sm:px-6 rounded-lg font-medium hover:bg-yellow-600 transition-colors duration-300 shadow-md\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\" />\r\n            </svg>\r\n            <span className=\"ml-2 hidden sm:inline\">Cart</span>\r\n            {/* Display the number of items in the cart (local or server cart) */}\r\n            {cart.items && cart.items.length > 0 && (\r\n              <span className=\"absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center\">\r\n                {cart.items.length}\r\n              </span>\r\n            )}\r\n          </Link>\r\n        </nav>\r\n      </header>\r\n\r\n      {/* Scrolling Marquee Title */}\r\n      <div className=\"bg-yellow-400 text-gray-900 py-2 px-4 overflow-hidden shadow-inner text-sm font-semibold whitespace-nowrap\">\r\n        <div className=\"inline-block animate-marquee\">\r\n          Never pay more than the Jora Mall prize!! Questions or concerns? Contact <a href=\"mailto:support@retailshopping.com\" className=\"text-blue-700 hover:underline\">support@retailshopping.com</a>\r\n        </div>\r\n      </div>\r\n\r\n      <main className=\"container mx-auto px-4 py-8\">\r\n        {/* Top Selling Products Section - displays first 8 products */}\r\n        {topSellingProducts.length > 0 && (\r\n          <section className=\"mb-12\">\r\n            <h2 className=\"text-3xl font-bold text-white mb-6 text-center\"> Top Selling Products</h2>\r\n            <div className=\"flex overflow-x-auto pb-4 space-x-6 scrollbar-thin scrollbar-thumb-blue-400 scrollbar-track-blue-900\">\r\n              {topSellingProducts.map((product) => (\r\n                // Link to product detail page\r\n                <Link to={`/product/${product._id}`} key={product._id} className=\"flex-shrink-0 w-64\">\r\n                  <div className=\"bg-gradient-to-br from-indigo-600 to-blue-700 text-white rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden transform hover:-translate-y-2 h-full flex flex-col\">\r\n                    <img\r\n                      src={product.imageUrl}\r\n                      alt={product.name}\r\n                      className=\"w-full h-40 object-cover rounded-t-xl\"\r\n                      // Fallback for broken images\r\n                      onError={(e) => {\r\n                        e.target.onerror = null;\r\n                        e.target.src = 'https://placehold.co/400x300/E0E0E0/333333?text=Image+Not+Found';\r\n                      }}\r\n                    />\r\n                    <div className=\"p-4 flex-grow flex flex-col\">\r\n                      <h3 className=\"text-lg font-semibold mb-1 truncate\">{product.name}</h3>\r\n                      <p className=\"text-sm text-blue-100 mb-2 line-clamp-2\">{product.description}</p>\r\n                      <div className=\"flex justify-between items-center mt-auto pt-2\">\r\n                        <span className=\"text-2xl font-bold text-yellow-300\">{formatPrice(product.price)}</span> {/* Currency Updated */}\r\n                        <span className=\"text-xs text-blue-200\">Stock: {product.stock}</span>\r\n                      </div>\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.preventDefault(); // Prevent navigation from the Link component\r\n                          // --- DEBUGGING LOG ---\r\n                          console.log('Attempting to add product to cart from ProductList:', {\r\n                            productId: product._id,\r\n                            quantity: 1,\r\n                            name: product.name,\r\n                            imageUrl: product.imageUrl,\r\n                            price: product.price\r\n                          });\r\n                          // --- END DEBUGGING LOG ---\r\n                          // Ensure product ID and details are valid before adding to cart\r\n                          if (product && product._id) {\r\n                            addToCart(product._id, 1, { // Pass product details for local cart\r\n                              name: product.name,\r\n                              imageUrl: product.imageUrl,\r\n                              price: product.price,\r\n                            });\r\n                          } else {\r\n                            console.error('Attempted to add to cart with invalid product data from ProductList:', product);\r\n                          }\r\n                        }}\r\n                        className=\"mt-4 w-full bg-green-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-green-600 transition-colors duration-300 shadow-md\"\r\n                      >\r\n                        Add to Cart\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </Link>\r\n              ))}\r\n            </div>\r\n          </section>\r\n        )}\r\n\r\n        {/* Search and Filter Section */}\r\n        <div className=\"bg-white p-6 rounded-lg shadow-md mb-8 flex flex-col md:flex-row md:items-end md:space-x-4 space-y-4 md:space-y-0\">\r\n          <div className=\"flex-grow\">\r\n            <label htmlFor=\"search\" className=\"block text-sm font-medium text-gray-700 mb-1\">Search Products</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"search\"\r\n              placeholder=\"Search by name or description...\"\r\n              value={searchTerm}\r\n              onChange={handleSearchChange}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"category\" className=\"block text-sm font-medium text-gray-700 mb-1\">Category</label>\r\n            <select\r\n              id=\"category\"\r\n              value={selectedCategory}\r\n              onChange={handleCategoryChange}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n            >\r\n              {availableCategories.map(cat => (\r\n                <option key={cat} value={cat === 'All' ? '' : cat}>\r\n                  {cat}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"flex space-x-2\">\r\n            <div>\r\n              <label htmlFor=\"minPrice\" className=\"block text-sm font-medium text-gray-700 mb-1\">Min Price</label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"minPrice\"\r\n                placeholder=\"Min\"\r\n                value={minPrice}\r\n                onChange={handleMinPriceChange}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"maxPrice\" className=\"block text-sm font-medium text-gray-700 mb-1\">Max Price</label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"maxPrice\"\r\n                placeholder=\"Max\"\r\n                value={maxPrice}\r\n                onChange={handleMaxPriceChange}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleClearFilters}\r\n            className=\"w-full md:w-auto bg-gray-300 text-gray-800 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-300 shadow-sm\"\r\n          >\r\n            Clear Filters\r\n          </button>\r\n        </div>\r\n\r\n        {/* Conditional rendering based on loading state or products availability */}\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center py-10\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500\"></div>\r\n            <p className=\"ml-4 text-lg text-white\">Fetching products...</p>\r\n          </div>\r\n        ) : products.length === 0 ? (\r\n          <div className=\"text-center text-blue-100 text-xl py-10\">\r\n            No products found matching your criteria. Try adjusting your search or filters.\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {/* Product Grid */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\r\n              {products.map((product) => (\r\n                // Link to individual product detail page\r\n                <Link to={`/product/${product._id}`} key={product._id} className=\"block\">\r\n                  <div\r\n                    className=\"bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 overflow-hidden flex flex-col h-full\"\r\n                  >\r\n                    <img\r\n                      src={product.imageUrl}\r\n                      alt={product.name}\r\n                      className=\"w-full h-48 object-cover rounded-t-xl\"\r\n                      onError={(e) => {\r\n                        e.target.onerror = null;\r\n                        e.target.src = 'https://placehold.co/400x300/E0E0E0/333333?text=Image+Not+Found';\r\n                      }}\r\n                    />\r\n                    <div className=\"p-4 flex-grow flex flex-col\">\r\n                      <h2 className=\"text-xl font-semibold text-gray-800 mb-2\">{product.name}</h2>\r\n                      {/* Display a truncated description */}\r\n                      <p className=\"text-gray-600 text-sm mb-3 flex-grow\">{product.description.substring(0, 100)}...</p>\r\n                      <div className=\"flex justify-between items-center mt-auto pt-2\">\r\n                        <span className=\"text-2xl font-bold text-blue-600\">{formatPrice(product.price)}</span> {/* Currency Updated */}\r\n                        <span className=\"text-sm text-gray-500\">Stock: {product.stock}</span>\r\n                      </div>\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.preventDefault(); // Prevent navigation when \"Add to Cart\" button is clicked\r\n                          // --- DEBUGGING LOG ---\r\n                          console.log('Attempting to add product to cart from ProductList (grid):', {\r\n                            productId: product._id,\r\n                            quantity: 1,\r\n                            name: product.name,\r\n                            imageUrl: product.imageUrl,\r\n                            price: product.price\r\n                          });\r\n                          // --- END DEBUGGING LOG ---\r\n                          if (product && product._id) {\r\n                            addToCart(product._id, 1, { // Pass product details for local cart\r\n                              name: product.name,\r\n                              imageUrl: product.imageUrl,\r\n                              price: product.price,\r\n                            });\r\n                          } else {\r\n                            console.error('Attempted to add to cart with invalid product data from ProductList (grid):', product);\r\n                          }\r\n                        }}\r\n                        className=\"mt-4 w-full bg-green-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-green-600 transition-colors duration-300 shadow-md\"\r\n                      >\r\n                        Add to Cart\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </Link>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Pagination Controls */}\r\n            {totalPages > 1 && (\r\n              <div className=\"flex justify-center items-center space-x-2 mt-8\">\r\n                <button\r\n                  onClick={() => handlePageChange((parseInt(searchParams.get('page')) || 1) - 1)}\r\n                  disabled={(parseInt(searchParams.get('page')) || 1) === 1}\r\n                  className=\"px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200\"\r\n                >\r\n                  Previous\r\n                </button>\r\n                {renderPageNumbers()}\r\n                <button\r\n                  onClick={() => handlePageChange((parseInt(searchParams.get('page')) || 1) + 1)}\r\n                  disabled={(parseInt(searchParams.get('page')) || 1) === totalPages}\r\n                  className=\"px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200\"\r\n                >\r\n                  Next\r\n                </button>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </main>\r\n\r\n      {/* New Footer Sections */}\r\n      {/* Changed background to white and text to red-700 */}\r\n      <section className=\"bg-white text-red-700 py-12 px-4 mt-8\">\r\n        <div className=\"container mx-auto grid grid-cols-1 md:grid-cols-4 gap-8\">\r\n\r\n          {/* Explore Jora Mall */}\r\n          <div>\r\n            <h3 className=\"text-xl font-bold mb-4 text-red-500\">Explore Jora Mall</h3> {/* Sub-header changed to red-500 for slight contrast */}\r\n            <ul className=\"space-y-2\">\r\n              {/* Links use text-red-700 by default and hover:text-red-500 for interactivity */}\r\n              <li><Link to=\"/products?category=Smartphones\" className=\"text-red-700 hover:text-red-500 transition-colors\">Smart Phones</Link></li>\r\n              <li><Link to=\"/products?category=Designer shoes\" className=\"text-red-700 hover:text-red-500 transition-colors\">Designer Shoes</Link></li>\r\n              <li><Link to=\"/products?category=Jackets\" className=\"text-red-700 hover:text-red-500 transition-colors\">Jackets</Link></li>\r\n              <li><Link to=\"/products?category=Sweatshirt\" className=\"text-red-700 hover:text-red-500 transition-colors\">Sweatshirt</Link></li>\r\n              <li><Link to=\"/\" className=\"text-red-700 hover:text-red-500 transition-colors\">All Products</Link></li>\r\n            </ul>\r\n          </div>\r\n\r\n          {/* Terms and Conditions */}\r\n          <div>\r\n            <h3 className=\"text-xl font-bold mb-4 text-red-500\">Terms and Conditions</h3> {/* Sub-header changed to red-500 */}\r\n            <ul className=\"space-y-2\">\r\n              {/* Links use text-red-700 by default and hover:text-red-500 for interactivity */}\r\n              <li><Link to=\"/cookie-policy\" className=\"text-red-700 hover:text-red-500 transition-colors\">Cookie Policy</Link></li>\r\n              <li><Link to=\"/data-privacy-statement\" className=\"text-red-700 hover:text-red-500 transition-colors\">Data Privacy Statement</Link></li>\r\n              <li><Link to=\"/website-usage-policy\" className=\"text-red-700 hover:text-red-500 transition-colors\">Website Usage Policy</Link></li>\r\n            </ul>\r\n          </div>\r\n\r\n          {/* Contact Us */}\r\n          <div>\r\n            <h3 className=\"text-xl font-bold mb-4 text-red-500\">Contact Us</h3> {/* Sub-header changed to red-500 */}\r\n            <p className=\"leading-relaxed\">\r\n              <strong>Head Office:</strong><br />\r\n              Jora Estate, Victoria Island,<br />\r\n              Lagos, Nigeria.\r\n            </p>\r\n            <p className=\"mt-2\">\r\n              <strong>Telephone:</strong> <a href=\"tel:+2348027035316\" className=\"text-red-700 hover:text-red-500 transition-colors\">+234 8027035316</a>\r\n            </p>\r\n            <p>\r\n              <strong>Email:</strong> <a href=\"mailto:support@retailshopping.com\" className=\"text-red-700 hover:text-red-500 transition-colors\">support@retailshopping.com</a>\r\n            </p>\r\n          </div>\r\n\r\n          {/* Social Media */}\r\n          <div>\r\n            <h3 className=\"text-xl font-bold mb-4 text-red-500\">Follow Us</h3> {/* Sub-header changed to red-500 */}\r\n            <div className=\"flex space-x-4\">\r\n              {/* Social media icons with updated colors and hover effects */}\r\n              <a href=\"https://wa.me/2348027035316\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-red-700 hover:text-green-500 transition-colors\">\r\n                <svg role=\"img\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-8 h-8\"><path d=\"M12.04 2c-5.46 0-9.9 4.44-9.9 9.9 0 1.77.47 3.45 1.38 4.9L2.05 22l5.03-1.32c1.4-.76 2.97-1.16 4.56-1.16 5.46 0 9.9-4.44 9.9-9.9S17.5 2 12.04 2zM17.3 15.68c-.19.34-.78.37-1.14.19-.36-.19-1.05-.43-1.47-.59-.42-.16-.72-.12-1.02.32-.3.44-1.17 1.54-1.42 1.83-.26.3-.51.34-.95.12-.44-.22-1.54-.57-2.93-1.81-1.08-.94-1.8-2.16-2-2.5a.6.6 0 01-.19-.44c0-.16.2-.38.45-.63.2-.23.44-.57.65-.85.2-.28.27-.47.18-.65-.08-.19-.72-1.74-1-2.45-.28-.7-.48-.59-.65-.6-.16-.01-.35-.02-.54-.02-.2 0-.52.07-.79.37-.27.3-.87 1.05-.87 2.56S6.9 16.33 7.3 16.92c.4.6 1.48 2.3 3.59 3.12 1.7 1 3.23 1.25 4.3 1.13 1.07-.12 2.36-.96 2.76-1.57.4-.6.4-1.1.2-1.42-.19-.32-.7-.49-1.05-.67z\"/></svg>\r\n              </a>\r\n              <a href=\"https://www.facebook.com/joramall\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-red-700 hover:text-blue-500 transition-colors\">\r\n                <svg role=\"img\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-8 h-8\"><path d=\"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.33 8.89 7.77 9.88V14.89h-2.54V12h2.54V9.79c0-2.51 1.49-3.9 3.77-3.9 1.09 0 2.24.19 2.24.19v2.46h-1.26c-1.24 0-1.63.77-1.63 1.56V12h2.78l-.45 2.89H13.5V22C17.47 21.14 22 17.16 22 12z\"/></svg>\r\n              </a>\r\n              <a href=\"https://www.instagram.com/joramall\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-red-700 hover:text-pink-500 transition-colors\">\r\n                <svg role=\"img\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-8 h-8\"><path d=\"M12 2c3.232 0 3.655.012 4.908.071 1.242.059 2.058.261 2.716.536.702.29 1.257.652 1.84 1.235.584.584.945 1.14 1.235 1.84.275.658.477 1.474.536 2.716.059 1.253.071 1.676.071 4.908s-.012 3.655-.071 4.908c-.059 1.242-.261 2.058-.536 2.716-.29.702-.652 1.257-1.235 1.84-.584.584-1.14.945-1.235 1.84-.275.658-.477 1.474-.536 2.716-.059 1.253-.071 1.676-.071 4.908s.012-3.655.071-4.908c.059-1.242.261-2.058.536-2.716.29-.702.652-1.257 1.235-1.84.584-.584 1.14-.945 1.84-1.235.658-.275 1.474-.477 2.716-.536C8.345 2.012 8.768 2 12 2zm0 2.474c-3.136 0-3.535.012-4.764.066-1.173.056-1.928.243-2.385.433-.497.199-.865.485-1.229.849-.364.364-.65.732-.849 1.229-.19.457-.377 1.212-.433 2.385-.054 1.23-.066 1.628-.066 4.764s.012 3.535.066 4.764c.056 1.173.243 1.928.433 2.385.199.497.485.865.849 1.229.364.364.732.65 1.229.849.457.19 1.212.377 2.385.433 1.23.054 1.628.066 4.764.066s3.535-.012 4.764-.066c1.173-.056 1.928-.243 2.385-.433.497-.199.865-.485 1.229-.849.364-.364.732-.65-.849-1.229-.457-.19-1.212-.377-2.385-.433-1.23-.054-1.628-.066-4.764-.066zm0 3.651c-3.411 0-6.192 2.781-6.192 6.192s2.781 6.192 6.192 6.192 6.192-2.781 6.192-6.192-2.781-6.192-6.192-6.192zm0 2.474a3.718 3.718 0 100 7.436 3.718 3.718 0 000-7.436zm6.335-3.327a1.474 1.474 0 110 2.948 1.474 1.474 0 010-2.948z\"/></svg>\r\n              </a>\r\n              <a href=\"https://x.com/joramall\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-red-700 hover:text-blue-400 transition-colors\">\r\n                <svg role=\"img\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-8 h-8\"><path d=\"M18.901 1.153h3.682L15.344 8.441l8.529 11.408H20.4L13.882 12.3l-6.84 7.551H2.387l7.551-8.354L1.13 1.153h3.811L11.5 7.086l6.899-5.933zM16.947 18.309H15.02L5.051 4.118H6.883L16.947 18.309z\"/></svg>\r\n              </a>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </section>\r\n\r\n      {/* Main Footer (Copyright) - Updated background to white and text to red-700 */}\r\n      <footer className=\"text-center py-6 bg-white text-red-700 text-sm\">\r\n        <p>&copy; {new Date().getFullYear()} Jora Mall. All rights reserved.</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Main App component responsible for overall application structure and routing\r\nfunction App() {\r\n  return (\r\n    <Router> {/* BrowserRouter for handling client-side routing */}\r\n      <AuthProvider> {/* AuthProvider makes authentication and cart context available globally */}\r\n        <Routes> {/* Defines all application routes */}\r\n          {/* Public Routes - accessible to all users */}\r\n          <Route path=\"/\" element={<ProductList />} /> {/* Home page, lists products */}\r\n          <Route path=\"/product/:id\" element={<ProductDetail />} /> {/* Individual product detail page */}\r\n          <Route path=\"/register\" element={<Register />} /> {/* User registration page */}\r\n          <Route path=\"/login\" element={<Login />} /> {/* User login page */}\r\n          <Route path=\"/cart\" element={<CartPage />} /> {/* Cart page (now accessible to guests) */}\r\n\r\n          {/* New placeholder routes for policy pages - you would create actual components for these later */}\r\n          <Route path=\"/cookie-policy\" element={<div className=\"min-h-screen bg-white text-red-700 flex items-center justify-center text-center text-4xl font-bold\">Cookie Policy Page<br/><Link to=\"/\" className=\"text-blue-500 hover:underline text-lg mt-4\">Go to Home</Link></div>} />\r\n          <Route path=\"/data-privacy-statement\" element={<div className=\"min-h-screen bg-white text-red-700 flex items-center justify-center text-center text-4xl font-bold\">Data Privacy Statement Page<br/><Link to=\"/\" className=\"text-blue-500 hover:underline text-lg mt-4\">Go to Home</Link></div>} />\r\n          <Route path=\"/website-usage-policy\" element={<div className=\"min-h-screen bg-white text-red-700 flex items-center justify-center text-center text-4xl font-bold\">Website Usage Policy Page<br/><Link to=\"/\" className=\"text-blue-500 hover:underline text-lg mt-4\">Go to Home</Link></div>} />\r\n\r\n          {/* Dynamic product category pages for \"Explore\" links. Renders ProductList with a pre-set category filter */}\r\n          {/* Note: The ProductList component uses `useSearchParams` to read category from URL, so a generic /products route works for dynamic category links */}\r\n          <Route path=\"/products\" element={<ProductList />} />\r\n\r\n          {/* Protected Routes (require user to be logged in) */}\r\n          <Route path=\"/checkout\" element={<ProtectedRoute><CheckoutPage /></ProtectedRoute>} /> {/* Checkout process */}\r\n          <Route path=\"/order-confirmation\" element={<ProtectedRoute><OrderConfirmationPage /></ProtectedRoute>} /> {/* Order confirmation */}\r\n          <Route path=\"/my-orders\" element={<ProtectedRoute><OrderHistoryPage /></ProtectedRoute>} /> {/* User's order history */}\r\n          <Route path=\"/wallet\" element={<ProtectedRoute><WalletPage /></ProtectedRoute>} /> {/* NEW: Wallet Page */}\r\n\r\n          {/* Admin Protected Routes (require user to be logged in AND have 'admin' role) */}\r\n          <Route\r\n            path=\"/add-product\"\r\n            element={\r\n              <ProtectedRoute allowedRoles={['admin']}>\r\n                <AddProduct /> {/* Admin page to add new products */}\r\n              </ProtectedRoute>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/edit-product/:id\"\r\n            element={\r\n              <ProtectedRoute allowedRoles={['admin']}>\r\n                <EditProduct /> {/* Admin page to edit existing products */}\r\n              </ProtectedRoute>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/admin/orders\"\r\n            element={\r\n              <ProtectedRoute allowedRoles={['admin']}>\r\n                <OrderManagementPage /> {/* Admin page to manage all orders */}\r\n              </ProtectedRoute>\r\n            }\r\n          />\r\n        </Routes>\r\n      </AuthProvider>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App; // Export the main App component\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}