{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\SUCCESSFUL PROJECTS\\\\Jora mall\\\\frontend\\\\client\\\\src\\\\OrderConfirmationPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react'; // Added useRef\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport { useAuth } from './AuthContext'; // Import useAuth to access token, clearCart, showCustomModal\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction OrderConfirmationPage() {\n  _s();\n  const {\n    token,\n    clearCart,\n    showCustomModal\n  } = useAuth(); // Get token, clearCart, showCustomModal from context\n  const location = useLocation(); // Hook to access URL's query parameters (where Paystack sends reference)\n  const navigate = useNavigate(); // Hook for navigation\n\n  const [order, setOrder] = useState(null); // State to store fetched order details after verification\n  const [loading, setLoading] = useState(true); // State for loading indicator during verification\n  const [error, setError] = useState(null); // State for error messages\n\n  // New ref to track if verification has already been attempted/completed\n  // Using useRef to prevent re-renders when this value changes, and to persist across renders\n  const hasVerifiedPaymentRef = useRef(false);\n\n  // Function to format price as Naira\n  const formatPrice = price => {\n    return new Intl.NumberFormat('en-NG', {\n      style: 'currency',\n      currency: 'NGN'\n    }).format(price);\n  };\n\n  // useEffect to handle payment verification when the component mounts or token changes\n  useEffect(() => {\n    const queryParams = new URLSearchParams(location.search);\n    const reference = queryParams.get('reference'); // Get Paystack transaction reference from the URL query string\n\n    // IMPORTANT: Check the ref to ensure verification only runs once per component mount\n    if (hasVerifiedPaymentRef.current) {\n      console.log('OrderConfirmationPage: Verification already attempted, skipping.');\n      setLoading(false); // Ensure loading is off if already verified\n      return; // Exit the effect if already processed\n    }\n\n    // If no reference is found in the URL, it means the page was accessed incorrectly or payment wasn't initiated\n    if (!reference) {\n      console.log('OrderConfirmationPage: No payment reference found in URL.');\n      showCustomModal('No payment reference found. Your order could not be confirmed.', () => {\n        navigate('/cart'); // Redirect to cart or home\n      });\n      setLoading(false); // Stop loading, as there's nothing to verify\n      return; // Exit the effect\n    }\n\n    // Ensure a token exists before attempting to verify payment with the backend\n    if (!token) {\n      console.log('OrderConfirmationPage: No token found, redirecting to login.');\n      showCustomModal('You must be logged in to confirm your order.', () => {\n        navigate('/login'); // Redirect to login if not authenticated\n      });\n      setLoading(false);\n      return; // Exit function if no token\n    }\n\n    // Set the flag to true to prevent future re-runs of this effect for verification\n    hasVerifiedPaymentRef.current = true;\n    setLoading(true); // Explicitly set loading to true when starting verification\n    setError(null); // Clear any previous errors\n\n    // Function to send the verification request to your backend\n    const verifyPayment = async () => {\n      console.log('OrderConfirmationPage: Initiating payment verification for reference:', reference);\n      try {\n        // Send a POST request to your backend's Paystack verification endpoint\n        const response = await fetch('https://jora-mall-backend.onrender.com/api/paystack/verify', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}` // Authenticate the request with user's JWT token\n          },\n          body: JSON.stringify({\n            reference\n          }) // Send the Paystack transaction reference\n        });\n\n        // Check if the backend response was successful\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.message || 'Payment verification failed on server.');\n        }\n        const data = await response.json(); // Parse the successful response\n        console.log('OrderConfirmationPage: Payment verification successful, response data:', data);\n\n        // Check if the backend confirmed the order status\n        if (data.order && data.order.status === 'completed' && data.order.paymentStatus === 'paid') {\n          setOrder(data.order); // Set the confirmed order details in state\n          clearCart(); // Clear the user's cart in the frontend context\n          // Use auto-dismiss modal for success confirmation\n          showCustomModal('Your order has been successfully placed!', () => {\n            // Optional: navigate to order history after acknowledging confirmation\n            // navigate('/my-orders');\n          }, 3000); // Auto-dismiss after 3 seconds\n        } else {\n          // If verification succeeded but order status is not as expected\n          throw new Error(data.message || 'Order status not confirmed as completed. Please check your order history.');\n        }\n      } catch (err) {\n        console.error('OrderConfirmationPage: Error during payment verification:', err);\n        setError(err.message); // Set error state\n        // For errors, it's better to keep the modal with an OK button for user acknowledgement\n        showCustomModal(`Order confirmation failed: ${err.message}`, () => {\n          navigate('/my-orders'); // Redirect to order history to allow user to check manually\n        });\n      } finally {\n        setLoading(false); // Ensure loading state is turned off after fetch\n      }\n    };\n\n    // Only trigger verification if all conditions are met\n    verifyPayment();\n  }, [location.search, token, navigate, clearCart, showCustomModal]); // Dependencies for this effect\n\n  // Render different UIs based on loading, error, or success states\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white text-gray-800 p-8 rounded-xl shadow-lg text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-2xl font-semibold mb-4\",\n          children: \"Verifying your payment and confirming order...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500 mx-auto mt-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative m-4 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold\",\n          children: \"Error:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"block sm:inline ml-2\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-4\",\n          children: [\"Please check your \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/my-orders\",\n            className: \"text-blue-800 hover:underline\",\n            children: \"Order History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 49\n          }, this), \" for updates or contact support.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this);\n  }\n\n  // If verification completed but no order data is set (e.g., failed silently or redirect issue)\n  if (!order) {\n    // This case should ideally be caught by error handling or `!reference` check.\n    // If it still happens, it indicates an unexpected state.\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white text-gray-800 p-8 rounded-xl shadow-lg text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-2xl font-semibold mb-4\",\n          children: \"No order details found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg mb-6\",\n          children: \"Something went wrong or your order was not successfully processed.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"bg-blue-500 text-white py-3 px-8 rounded-lg font-medium hover:bg-blue-600 transition-colors duration-300 shadow-md\",\n          children: \"Go to Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Render the confirmed order details\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-[#000080] p-4 sm:p-8 text-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"text-center py-8 bg-gradient-to-r from-blue-800 to-indigo-900 rounded-b-xl shadow-lg mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-4xl font-bold text-white tracking-tight\",\n        children: \"Order Confirmed!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl text-blue-200 mt-2\",\n        children: \"Thank you for your purchase.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mx-auto px-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-lg p-6 md:p-8 text-gray-800\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold mb-6 text-center text-green-700\",\n          children: [\"Order #\", order._id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold mb-3\",\n            children: \"Order Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 18\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-600 font-medium capitalize\",\n                children: order.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 43\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Total Amount:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 18\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-bold text-blue-700\",\n                children: formatPrice(order.totalAmount)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 49\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Payment Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 18\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"capitalize\",\n                children: order.paymentStatus\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 51\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Order Date:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 18\n              }, this), \" \", new Date(order.createdAt).toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this), order.paystackReference && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Paystack Ref:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 46\n              }, this), \" \", order.paystackReference]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 43\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold mb-3\",\n            children: \"Items Ordered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: order.items.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center border-b border-gray-100 pb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-700\",\n                children: [item.name, \" (x\", item.quantity, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium text-gray-900\",\n                children: formatPrice(item.price * item.quantity)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, this)]\n            }, item.product, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold mb-3\",\n            children: \"Shipping Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 p-4 rounded-md space-y-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: order.shippingAddress.fullName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: order.shippingAddress.address\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [order.shippingAddress.city, \", \", order.shippingAddress.postalCode]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: order.shippingAddress.country\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center mt-8 space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/my-orders\",\n            className: \"bg-purple-600 text-white py-3 px-8 rounded-lg font-medium hover:bg-purple-700 transition-colors duration-300 shadow-md block max-w-xs mx-auto\",\n            children: \"View My Orders\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            className: \"text-blue-600 hover:underline block max-w-xs mx-auto\",\n            children: \"Continue Shopping\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"text-center py-6 mt-8 text-blue-200 text-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\xA9 \", new Date().getFullYear(), \" Jora Mall. All rights reserved.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 5\n  }, this);\n}\n_s(OrderConfirmationPage, \"BqHTeLqJG60DkyXhn1wkduXHnTY=\", false, function () {\n  return [useAuth, useLocation, useNavigate];\n});\n_c = OrderConfirmationPage;\nexport default OrderConfirmationPage;\nvar _c;\n$RefreshReg$(_c, \"OrderConfirmationPage\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Link","useLocation","useNavigate","useAuth","jsxDEV","_jsxDEV","OrderConfirmationPage","_s","token","clearCart","showCustomModal","location","navigate","order","setOrder","loading","setLoading","error","setError","hasVerifiedPaymentRef","formatPrice","price","Intl","NumberFormat","style","currency","format","queryParams","URLSearchParams","search","reference","get","current","console","log","verifyPayment","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","Error","message","data","status","paymentStatus","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","_id","totalAmount","Date","createdAt","toLocaleString","paystackReference","items","map","item","name","quantity","product","shippingAddress","fullName","address","city","postalCode","country","getFullYear","_c","$RefreshReg$"],"sources":["C:/Users/HP/OneDrive/Desktop/SUCCESSFUL PROJECTS/Jora mall/frontend/client/src/OrderConfirmationPage.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react'; // Added useRef\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from './AuthContext'; // Import useAuth to access token, clearCart, showCustomModal\r\n\r\nfunction OrderConfirmationPage() {\r\n  const { token, clearCart, showCustomModal } = useAuth(); // Get token, clearCart, showCustomModal from context\r\n  const location = useLocation(); // Hook to access URL's query parameters (where Paystack sends reference)\r\n  const navigate = useNavigate(); // Hook for navigation\r\n\r\n  const [order, setOrder] = useState(null);     // State to store fetched order details after verification\r\n  const [loading, setLoading] = useState(true); // State for loading indicator during verification\r\n  const [error, setError] = useState(null);     // State for error messages\r\n\r\n  // New ref to track if verification has already been attempted/completed\r\n  // Using useRef to prevent re-renders when this value changes, and to persist across renders\r\n  const hasVerifiedPaymentRef = useRef(false);\r\n\r\n  // Function to format price as Naira\r\n  const formatPrice = (price) => {\r\n    return new Intl.NumberFormat('en-NG', { style: 'currency', currency: 'NGN' }).format(price);\r\n  };\r\n\r\n  // useEffect to handle payment verification when the component mounts or token changes\r\n  useEffect(() => {\r\n    const queryParams = new URLSearchParams(location.search);\r\n    const reference = queryParams.get('reference'); // Get Paystack transaction reference from the URL query string\r\n\r\n    // IMPORTANT: Check the ref to ensure verification only runs once per component mount\r\n    if (hasVerifiedPaymentRef.current) {\r\n      console.log('OrderConfirmationPage: Verification already attempted, skipping.');\r\n      setLoading(false); // Ensure loading is off if already verified\r\n      return; // Exit the effect if already processed\r\n    }\r\n\r\n    // If no reference is found in the URL, it means the page was accessed incorrectly or payment wasn't initiated\r\n    if (!reference) {\r\n      console.log('OrderConfirmationPage: No payment reference found in URL.');\r\n      showCustomModal('No payment reference found. Your order could not be confirmed.', () => {\r\n        navigate('/cart'); // Redirect to cart or home\r\n      });\r\n      setLoading(false); // Stop loading, as there's nothing to verify\r\n      return; // Exit the effect\r\n    }\r\n\r\n    // Ensure a token exists before attempting to verify payment with the backend\r\n    if (!token) {\r\n        console.log('OrderConfirmationPage: No token found, redirecting to login.');\r\n      showCustomModal('You must be logged in to confirm your order.', () => {\r\n        navigate('/login'); // Redirect to login if not authenticated\r\n      });\r\n      setLoading(false);\r\n      return; // Exit function if no token\r\n    }\r\n\r\n    // Set the flag to true to prevent future re-runs of this effect for verification\r\n    hasVerifiedPaymentRef.current = true;\r\n    setLoading(true); // Explicitly set loading to true when starting verification\r\n    setError(null); // Clear any previous errors\r\n\r\n    // Function to send the verification request to your backend\r\n    const verifyPayment = async () => {\r\n      console.log('OrderConfirmationPage: Initiating payment verification for reference:', reference);\r\n      try {\r\n        // Send a POST request to your backend's Paystack verification endpoint\r\n        const response = await fetch('https://jora-mall-backend.onrender.com/api/paystack/verify', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`, // Authenticate the request with user's JWT token\r\n          },\r\n          body: JSON.stringify({ reference }), // Send the Paystack transaction reference\r\n        });\r\n\r\n        // Check if the backend response was successful\r\n        if (!response.ok) {\r\n          const errorData = await response.json();\r\n          throw new Error(errorData.message || 'Payment verification failed on server.');\r\n        }\r\n\r\n        const data = await response.json(); // Parse the successful response\r\n        console.log('OrderConfirmationPage: Payment verification successful, response data:', data);\r\n\r\n        // Check if the backend confirmed the order status\r\n        if (data.order && data.order.status === 'completed' && data.order.paymentStatus === 'paid') {\r\n          setOrder(data.order); // Set the confirmed order details in state\r\n          clearCart(); // Clear the user's cart in the frontend context\r\n          // Use auto-dismiss modal for success confirmation\r\n          showCustomModal('Your order has been successfully placed!', () => {\r\n            // Optional: navigate to order history after acknowledging confirmation\r\n            // navigate('/my-orders');\r\n          }, 3000); // Auto-dismiss after 3 seconds\r\n        } else {\r\n          // If verification succeeded but order status is not as expected\r\n          throw new Error(data.message || 'Order status not confirmed as completed. Please check your order history.');\r\n        }\r\n\r\n      } catch (err) {\r\n        console.error('OrderConfirmationPage: Error during payment verification:', err);\r\n        setError(err.message); // Set error state\r\n        // For errors, it's better to keep the modal with an OK button for user acknowledgement\r\n        showCustomModal(`Order confirmation failed: ${err.message}`, () => {\r\n          navigate('/my-orders'); // Redirect to order history to allow user to check manually\r\n        });\r\n      } finally {\r\n        setLoading(false); // Ensure loading state is turned off after fetch\r\n      }\r\n    };\r\n\r\n    // Only trigger verification if all conditions are met\r\n    verifyPayment();\r\n\r\n  }, [location.search, token, navigate, clearCart, showCustomModal]); // Dependencies for this effect\r\n\r\n  // Render different UIs based on loading, error, or success states\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\">\r\n        <div className=\"bg-white text-gray-800 p-8 rounded-xl shadow-lg text-center\">\r\n          <p className=\"text-2xl font-semibold mb-4\">Verifying your payment and confirming order...</p>\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500 mx-auto mt-4\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\">\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative m-4 text-center\">\r\n          <p className=\"font-bold\">Error:</p>\r\n          <p className=\"block sm:inline ml-2\">{error}</p>\r\n          <p className=\"mt-4\">Please check your <Link to=\"/my-orders\" className=\"text-blue-800 hover:underline\">Order History</Link> for updates or contact support.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // If verification completed but no order data is set (e.g., failed silently or redirect issue)\r\n  if (!order) {\r\n    // This case should ideally be caught by error handling or `!reference` check.\r\n    // If it still happens, it indicates an unexpected state.\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\">\r\n        <div className=\"bg-white text-gray-800 p-8 rounded-xl shadow-lg text-center\">\r\n          <p className=\"text-2xl font-semibold mb-4\">No order details found.</p>\r\n          <p className=\"text-lg mb-6\">Something went wrong or your order was not successfully processed.</p>\r\n          <Link to=\"/\" className=\"bg-blue-500 text-white py-3 px-8 rounded-lg font-medium hover:bg-blue-600 transition-colors duration-300 shadow-md\">\r\n            Go to Home\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Render the confirmed order details\r\n  return (\r\n    <div className=\"min-h-screen bg-[#000080] p-4 sm:p-8 text-white\">\r\n      <header className=\"text-center py-8 bg-gradient-to-r from-blue-800 to-indigo-900 rounded-b-xl shadow-lg mb-8\">\r\n        <h1 className=\"text-4xl font-bold text-white tracking-tight\">Order Confirmed!</h1>\r\n        <p className=\"text-xl text-blue-200 mt-2\">Thank you for your purchase.</p>\r\n      </header>\r\n\r\n      <main className=\"container mx-auto px-4\">\r\n        <div className=\"bg-white rounded-xl shadow-lg p-6 md:p-8 text-gray-800\">\r\n          <h2 className=\"text-2xl font-bold mb-6 text-center text-green-700\">Order #{order._id}</h2>\r\n\r\n          <div className=\"mb-6\">\r\n            <h3 className=\"text-xl font-semibold mb-3\">Order Details</h3>\r\n            <div className=\"space-y-2\">\r\n              <p><strong>Status:</strong> <span className=\"text-green-600 font-medium capitalize\">{order.status}</span></p>\r\n              <p><strong>Total Amount:</strong> <span className=\"font-bold text-blue-700\">{formatPrice(order.totalAmount)}</span></p>\r\n              <p><strong>Payment Status:</strong> <span className=\"capitalize\">{order.paymentStatus}</span></p>\r\n              <p><strong>Order Date:</strong> {new Date(order.createdAt).toLocaleString()}</p>\r\n              {order.paystackReference && <p><strong>Paystack Ref:</strong> {order.paystackReference}</p>}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-6\">\r\n            <h3 className=\"text-xl font-semibold mb-3\">Items Ordered</h3>\r\n            <div className=\"space-y-3\">\r\n              {order.items.map(item => (\r\n                <div key={item.product} className=\"flex justify-between items-center border-b border-gray-100 pb-2\">\r\n                  <span className=\"text-gray-700\">{item.name} (x{item.quantity})</span>\r\n                  <span className=\"font-medium text-gray-900\">{formatPrice(item.price * item.quantity)}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-6\">\r\n            <h3 className=\"text-xl font-semibold mb-3\">Shipping Address</h3>\r\n            <div className=\"bg-gray-50 p-4 rounded-md space-y-1\">\r\n              <p>{order.shippingAddress.fullName}</p>\r\n              <p>{order.shippingAddress.address}</p>\r\n              <p>{order.shippingAddress.city}, {order.shippingAddress.postalCode}</p>\r\n              <p>{order.shippingAddress.country}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"text-center mt-8 space-y-4\">\r\n            <Link to=\"/my-orders\" className=\"bg-purple-600 text-white py-3 px-8 rounded-lg font-medium hover:bg-purple-700 transition-colors duration-300 shadow-md block max-w-xs mx-auto\">\r\n              View My Orders\r\n            </Link>\r\n            <Link to=\"/\" className=\"text-blue-600 hover:underline block max-w-xs mx-auto\">\r\n              Continue Shopping\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      <footer className=\"text-center py-6 mt-8 text-blue-200 text-sm\">\r\n        <p>&copy; {new Date().getFullYear()} Jora Mall. All rights reserved.</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OrderConfirmationPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}