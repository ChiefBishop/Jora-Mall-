{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';// Added Link import for consistency\nimport{useAuth}from'./AuthContext';// Import useAuth to access addToCart and user info\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductDetail(){const{id}=useParams();// Get product ID from URL parameters (e.g., from /product/:id)\nconst navigate=useNavigate();// Hook for programmatic navigation\n// Destructure necessary functions and state from AuthContext\nconst{user,token,addToCart,showCustomModal}=useAuth();const[product,setProduct]=useState(null);// State to store the fetched product details\nconst[loading,setLoading]=useState(true);// State for loading indicator (true while fetching)\nconst[error,setError]=useState(null);// State to store any error messages during fetch\nconst[quantity,setQuantity]=useState(1);// State for the quantity the user wants to add to cart\n// Function to format price as Nigerian Naira (â‚¦)\nconst formatPrice=price=>{// Uses Intl.NumberFormat for robust currency formatting based on locale\nreturn new Intl.NumberFormat('en-NG',{style:'currency',currency:'NGN'}).format(price);};// useEffect hook to fetch product details when the component mounts or the product ID changes\nuseEffect(()=>{const fetchProduct=async()=>{setLoading(true);// Start loading state\nsetError(null);// Clear previous errors\ntry{// --- IMPORTANT: When deploying, replace 'http://localhost:5000' with your deployed backend URL ---\nconst response=await fetch(\"https://jora-mall-backend.onrender.com/api/products/\".concat(id));if(!response.ok){// If the HTTP response is not OK (e.g., 404, 500), throw an error\nthrow new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();// Parse the JSON response\nsetProduct(data);// Update the product state with the fetched data\n}catch(err){console.error('Error fetching product details:',err);// Log the detailed error\nsetError(err.message);// Set the error message for display\n}finally{setLoading(false);// End loading state regardless of success or failure\n}};fetchProduct();// Call the fetch function\n},[id]);// Dependency array: Effect re-runs if the `id` from URL parameters changes\n// Handler for adding the product to the cart\nconst handleAddToCart=()=>{// Check if product data is available and has an ID\nif(product&&product._id){// Call addToCart from AuthContext, passing product ID, quantity, and relevant details\n// The product details (name, imageUrl, price) are important for local cart display when not logged in.\naddToCart(product._id,quantity,{name:product.name,imageUrl:product.imageUrl,price:product.price});}else{console.error('Attempted to add to cart with invalid product data:',product);}};// Handler for navigating to the product edit page (Admin only)\nconst handleEditProduct=()=>{// This will only be accessible if ProtectedRoute for /edit-product/:id allows 'admin' role\nnavigate(\"/edit-product/\".concat(product._id));};// Handler for deleting the product (Admin only)\nconst handleDeleteProduct=async()=>{// Perform authorization check before proceeding with deletion\nif(!user||user.role!=='admin'||!token){showCustomModal('You are not authorized to delete products.');return;// Exit if unauthorized\n}// Use the custom modal for confirmation before proceeding with the delete API call\nshowCustomModal('Are you sure you want to delete this product? Click OK to confirm.',async()=>{try{// --- IMPORTANT: When deploying, replace 'http://localhost:5000' with your deployed backend URL ---\nconst response=await fetch(\"https://jora-mall-backend.onrender.com/api/products/\".concat(product._id),{method:'DELETE',// HTTP DELETE method\nheaders:{'Authorization':\"Bearer \".concat(token)// Include JWT token for authentication\n}});if(!response.ok){const errorData=await response.json();// Parse error response from backend\nthrow new Error(errorData.message||\"HTTP error! status: \".concat(response.status));}// Show success message and redirect to home page after successful deletion\nshowCustomModal('Product deleted successfully!',()=>{navigate('/');});}catch(err){console.error('Error deleting product:',err);// Log the error\nshowCustomModal(\"Failed to delete product: \".concat(err.message));// Show user-friendly error\n}});};// Conditional rendering based on loading, error, or product not found states\nif(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500\"}),/*#__PURE__*/_jsx(\"p\",{className:\"ml-4 text-lg text-white\",children:\"Loading product details...\"})]});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative m-4 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:\"Error:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"block sm:inline ml-2\",children:error}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"mt-4 text-blue-700 hover:underline\",children:\"Go to Home\"})]})});}if(!product){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white text-gray-800 p-8 rounded-xl shadow-lg text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold mb-4\",children:\"Product not found.\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"bg-blue-500 text-white py-3 px-8 rounded-lg font-medium hover:bg-blue-600 transition-colors duration-300 shadow-md\",children:\"Go to Home\"})]})});}// Main render for product details\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-[#000080] p-4 sm:p-8 text-white font-inter\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"text-center py-8 bg-gradient-to-r from-blue-800 to-indigo-900 rounded-b-xl shadow-lg mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-white tracking-tight\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-blue-200 mt-2\",children:\"Product Details\"})]}),/*#__PURE__*/_jsx(\"main\",{className:\"container mx-auto px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-6 md:p-8 text-gray-800 flex flex-col md:flex-row items-start md:space-x-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 md:w-1/2 lg:w-1/3 mb-6 md:mb-0\",children:/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,alt:product.name,className:\"w-full h-auto object-cover rounded-xl shadow-md\",onError:e=>{e.target.onerror=null;// Prevent infinite loop if fallback image also fails\ne.target.src='https://placehold.co/600x400/E0E0E0/333333?text=Image+Not+Found';// Fallback placeholder image\n}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-800 mb-3\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-lg mb-4\",children:product.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-700 text-2xl font-bold mb-4\",children:[\"Category: \",product.category]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 text-3xl font-extrabold mb-4\",children:formatPrice(product.price)}),\" \",/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 text-lg mb-6\",children:[\"Availability: \",product.stock>0?/*#__PURE__*/_jsxs(\"span\",{className:\"text-green-500 font-semibold\",children:[product.stock,\" in stock\"]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500 font-semibold\",children:\"Out of Stock\"})]}),product.stock>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"quantity\",className:\"text-gray-700 font-medium\",children:\"Quantity:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"quantity\",min:\"1\",max:product.stock// Maximum quantity user can add is limited by current stock\n,value:quantity,onChange:e=>setQuantity(parseInt(e.target.value)||1)// Parse input to integer, default to 1 if invalid\n,className:\"w-24 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-800\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddToCart,className:\"bg-blue-600 text-white py-2 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-300 shadow-md\",disabled:quantity>product.stock||quantity<=0// Disable if quantity is invalid or exceeds stock\n,children:\"Add to Cart\"})]}),user&&user.role==='admin'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 pt-6 border-t border-gray-200 space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800\",children:\"Admin Actions:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEditProduct,className:\"w-full bg-yellow-500 text-white py-2 px-6 rounded-lg font-medium hover:bg-yellow-600 transition-colors duration-300 shadow-md\",children:\"Edit Product\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDeleteProduct,className:\"w-full bg-red-500 text-white py-2 px-6 rounded-lg font-medium hover:bg-red-600 transition-colors duration-300 shadow-md\",children:\"Delete Product\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"block mt-8 text-center text-blue-600 hover:underline\",children:\"\\u2190 Back to Products\"})]})]})}),/*#__PURE__*/_jsx(\"footer\",{className:\"text-center py-6 mt-8 text-blue-200 text-sm\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\xA9 \",new Date().getFullYear(),\" Jora Mall. All rights reserved.\"]})})]});}export default ProductDetail;// Export the ProductDetail component","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","useAuth","jsx","_jsx","jsxs","_jsxs","ProductDetail","id","navigate","user","token","addToCart","showCustomModal","product","setProduct","loading","setLoading","error","setError","quantity","setQuantity","formatPrice","price","Intl","NumberFormat","style","currency","format","fetchProduct","response","fetch","concat","ok","Error","status","data","json","err","console","message","handleAddToCart","_id","name","imageUrl","handleEditProduct","handleDeleteProduct","role","method","headers","errorData","className","children","to","src","alt","onError","e","target","onerror","description","category","stock","htmlFor","type","min","max","value","onChange","parseInt","onClick","disabled","Date","getFullYear"],"sources":["C:/Users/HP/OneDrive/Desktop/SUCCESSFUL PROJECTS/Jora mall/frontend/client/src/ProductDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom'; // Added Link import for consistency\r\nimport { useAuth } from './AuthContext'; // Import useAuth to access addToCart and user info\r\n\r\nfunction ProductDetail() {\r\n  const { id } = useParams(); // Get product ID from URL parameters (e.g., from /product/:id)\r\n  const navigate = useNavigate(); // Hook for programmatic navigation\r\n  // Destructure necessary functions and state from AuthContext\r\n  const { user, token, addToCart, showCustomModal } = useAuth();\r\n\r\n  const [product, setProduct] = useState(null); // State to store the fetched product details\r\n  const [loading, setLoading] = useState(true); // State for loading indicator (true while fetching)\r\n  const [error, setError] = useState(null);     // State to store any error messages during fetch\r\n  const [quantity, setQuantity] = useState(1); // State for the quantity the user wants to add to cart\r\n\r\n  // Function to format price as Nigerian Naira (â‚¦)\r\n  const formatPrice = (price) => {\r\n    // Uses Intl.NumberFormat for robust currency formatting based on locale\r\n    return new Intl.NumberFormat('en-NG', { style: 'currency', currency: 'NGN' }).format(price);\r\n  };\r\n\r\n  // useEffect hook to fetch product details when the component mounts or the product ID changes\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      setLoading(true); // Start loading state\r\n      setError(null);   // Clear previous errors\r\n\r\n      try {\r\n        // --- IMPORTANT: When deploying, replace 'http://localhost:5000' with your deployed backend URL ---\r\n        const response = await fetch(`https://jora-mall-backend.onrender.com/api/products/${id}`);\r\n        if (!response.ok) {\r\n          // If the HTTP response is not OK (e.g., 404, 500), throw an error\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const data = await response.json(); // Parse the JSON response\r\n        setProduct(data); // Update the product state with the fetched data\r\n      } catch (err) {\r\n        console.error('Error fetching product details:', err); // Log the detailed error\r\n        setError(err.message); // Set the error message for display\r\n      } finally {\r\n        setLoading(false); // End loading state regardless of success or failure\r\n      }\r\n    };\r\n\r\n    fetchProduct(); // Call the fetch function\r\n  }, [id]); // Dependency array: Effect re-runs if the `id` from URL parameters changes\r\n\r\n  // Handler for adding the product to the cart\r\n  const handleAddToCart = () => {\r\n    // Check if product data is available and has an ID\r\n    if (product && product._id) {\r\n      // Call addToCart from AuthContext, passing product ID, quantity, and relevant details\r\n      // The product details (name, imageUrl, price) are important for local cart display when not logged in.\r\n      addToCart(product._id, quantity, {\r\n        name: product.name,\r\n        imageUrl: product.imageUrl,\r\n        price: product.price,\r\n      });\r\n    } else {\r\n      console.error('Attempted to add to cart with invalid product data:', product);\r\n    }\r\n  };\r\n\r\n  // Handler for navigating to the product edit page (Admin only)\r\n  const handleEditProduct = () => {\r\n    // This will only be accessible if ProtectedRoute for /edit-product/:id allows 'admin' role\r\n    navigate(`/edit-product/${product._id}`);\r\n  };\r\n\r\n  // Handler for deleting the product (Admin only)\r\n  const handleDeleteProduct = async () => {\r\n    // Perform authorization check before proceeding with deletion\r\n    if (!user || user.role !== 'admin' || !token) {\r\n      showCustomModal('You are not authorized to delete products.');\r\n      return; // Exit if unauthorized\r\n    }\r\n\r\n    // Use the custom modal for confirmation before proceeding with the delete API call\r\n    showCustomModal('Are you sure you want to delete this product? Click OK to confirm.', async () => {\r\n      try {\r\n        // --- IMPORTANT: When deploying, replace 'http://localhost:5000' with your deployed backend URL ---\r\n        const response = await fetch(`https://jora-mall-backend.onrender.com/api/products/${product._id}`, {\r\n          method: 'DELETE', // HTTP DELETE method\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`, // Include JWT token for authentication\r\n          },\r\n        });\r\n\r\n        if (!response.ok) {\r\n          const errorData = await response.json(); // Parse error response from backend\r\n          throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        // Show success message and redirect to home page after successful deletion\r\n        showCustomModal('Product deleted successfully!', () => {\r\n          navigate('/');\r\n        });\r\n      } catch (err) {\r\n        console.error('Error deleting product:', err); // Log the error\r\n        showCustomModal(`Failed to delete product: ${err.message}`); // Show user-friendly error\r\n      }\r\n    });\r\n  };\r\n\r\n  // Conditional rendering based on loading, error, or product not found states\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500\"></div>\r\n        <p className=\"ml-4 text-lg text-white\">Loading product details...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\">\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative m-4 text-center\">\r\n          <p className=\"font-bold\">Error:</p>\r\n          <p className=\"block sm:inline ml-2\">{error}</p>\r\n          <Link to=\"/\" className=\"mt-4 text-blue-700 hover:underline\">Go to Home</Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\">\r\n        <div className=\"bg-white text-gray-800 p-8 rounded-xl shadow-lg text-center\">\r\n          <p className=\"text-2xl font-semibold mb-4\">Product not found.</p>\r\n          <Link to=\"/\" className=\"bg-blue-500 text-white py-3 px-8 rounded-lg font-medium hover:bg-blue-600 transition-colors duration-300 shadow-md\">\r\n            Go to Home\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Main render for product details\r\n  return (\r\n    <div className=\"min-h-screen bg-[#000080] p-4 sm:p-8 text-white font-inter\">\r\n      <header className=\"text-center py-8 bg-gradient-to-r from-blue-800 to-indigo-900 rounded-b-xl shadow-lg mb-8\">\r\n        <h1 className=\"text-4xl font-bold text-white tracking-tight\">{product.name}</h1>\r\n        <p className=\"text-xl text-blue-200 mt-2\">Product Details</p>\r\n      </header>\r\n\r\n      <main className=\"container mx-auto px-4\">\r\n        <div className=\"bg-white rounded-xl shadow-lg p-6 md:p-8 text-gray-800 flex flex-col md:flex-row items-start md:space-x-8\">\r\n          {/* Product Image Section */}\r\n          <div className=\"flex-shrink-0 md:w-1/2 lg:w-1/3 mb-6 md:mb-0\">\r\n            <img\r\n              src={product.imageUrl}\r\n              alt={product.name}\r\n              className=\"w-full h-auto object-cover rounded-xl shadow-md\"\r\n              onError={(e) => {\r\n                e.target.onerror = null; // Prevent infinite loop if fallback image also fails\r\n                e.target.src = 'https://placehold.co/600x400/E0E0E0/333333?text=Image+Not+Found'; // Fallback placeholder image\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          {/* Product Information Section */}\r\n          <div className=\"flex-grow\">\r\n            <h2 className=\"text-3xl font-bold text-gray-800 mb-3\">{product.name}</h2>\r\n            <p className=\"text-gray-600 text-lg mb-4\">{product.description}</p>\r\n            <p className=\"text-blue-700 text-2xl font-bold mb-4\">Category: {product.category}</p>\r\n            <p className=\"text-green-600 text-3xl font-extrabold mb-4\">{formatPrice(product.price)}</p> {/* Display price in Naira */}\r\n            <p className=\"text-gray-700 text-lg mb-6\">\r\n              Availability: {product.stock > 0 ? (\r\n                <span className=\"text-green-500 font-semibold\">{product.stock} in stock</span>\r\n              ) : (\r\n                <span className=\"text-red-500 font-semibold\">Out of Stock</span>\r\n              )}\r\n            </p>\r\n\r\n            {/* Add to Cart Section (only if in stock) */}\r\n            {product.stock > 0 && (\r\n              <div className=\"flex items-center space-x-4 mb-6\">\r\n                <label htmlFor=\"quantity\" className=\"text-gray-700 font-medium\">Quantity:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  id=\"quantity\"\r\n                  min=\"1\"\r\n                  max={product.stock} // Maximum quantity user can add is limited by current stock\r\n                  value={quantity}\r\n                  onChange={(e) => setQuantity(parseInt(e.target.value) || 1)} // Parse input to integer, default to 1 if invalid\r\n                  className=\"w-24 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-800\"\r\n                />\r\n                <button\r\n                  onClick={handleAddToCart}\r\n                  className=\"bg-blue-600 text-white py-2 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-300 shadow-md\"\r\n                  disabled={quantity > product.stock || quantity <= 0} // Disable if quantity is invalid or exceeds stock\r\n                >\r\n                  Add to Cart\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Admin Actions Section (only visible to users with 'admin' role) */}\r\n            {user && user.role === 'admin' && (\r\n              <div className=\"mt-8 pt-6 border-t border-gray-200 space-y-4\">\r\n                <h3 className=\"text-xl font-semibold text-gray-800\">Admin Actions:</h3>\r\n                <button\r\n                  onClick={handleEditProduct}\r\n                  className=\"w-full bg-yellow-500 text-white py-2 px-6 rounded-lg font-medium hover:bg-yellow-600 transition-colors duration-300 shadow-md\"\r\n                >\r\n                  Edit Product\r\n                </button>\r\n                <button\r\n                  onClick={handleDeleteProduct}\r\n                  className=\"w-full bg-red-500 text-white py-2 px-6 rounded-lg font-medium hover:bg-red-600 transition-colors duration-300 shadow-md\"\r\n                >\r\n                  Delete Product\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Link back to products list */}\r\n            <Link to=\"/\" className=\"block mt-8 text-center text-blue-600 hover:underline\">\r\n              &larr; Back to Products\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      {/* Footer */}\r\n      <footer className=\"text-center py-6 mt-8 text-blue-200 text-sm\">\r\n        <p>&copy; {new Date().getFullYear()} Jora Mall. All rights reserved.</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductDetail; // Export the ProductDetail component\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}