{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\SUCCESSFUL PROJECTS\\\\Jora mall\\\\frontend\\\\client\\\\src\\\\CheckoutPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from './AuthContext'; // Import useAuth to get user, token, cart, showCustomModal, clearCart, fetchWalletBalance\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CheckoutPage() {\n  _s();\n  const {\n    user,\n    token,\n    cart,\n    clearCart,\n    showCustomModal,\n    fetchWalletBalance\n  } = useAuth(); // Get necessary context values\n  const navigate = useNavigate(); // Hook for navigation\n\n  // State for delivery address form\n  const [deliveryInfo, setDeliveryInfo] = useState({\n    fullName: (user === null || user === void 0 ? void 0 : user.username) || '',\n    // Pre-fill with username if available (using optional chaining)\n    email: (user === null || user === void 0 ? void 0 : user.email) || '',\n    // Pre-fill with email if available\n    address: '',\n    city: '',\n    postalCode: '',\n    country: ''\n  });\n  const [paymentMethod, setPaymentMethod] = useState('paystack'); // Default payment method\n  const [loading, setLoading] = useState(false); // State for loading indicator during checkout process\n  const [error, setError] = useState(null); // State for displaying error messages\n\n  // --- IMPORTANT: This URL is for your DEPLOYED backend ---\n  // If you redeploy your backend and its URL changes, you MUST update it here.\n  const backendBaseUrl = 'https://jora-mall-backend.onrender.com';\n\n  // Function to format price as Naira\n  const formatPrice = price => {\n    return new Intl.NumberFormat('en-NG', {\n      style: 'currency',\n      currency: 'NGN'\n    }).format(price);\n  };\n\n  // Effect to handle initial checks: cart empty or user not logged in\n  useEffect(() => {\n    // Stringify cart.items to ensure effect only re-runs if cart content changes, not just reference\n    if (!cart || !cart.items || cart.items.length === 0) {\n      showCustomModal('Your cart is empty. Please add items before checking out.', () => {\n        navigate('/cart'); // Redirect to cart page\n      });\n      return; // Exit early\n    }\n    // Also handle case where user somehow lands here without being logged in (though ProtectedRoute should catch this)\n    if (!user || !token) {\n      showCustomModal('You must be logged in to proceed to checkout.', () => {\n        navigate('/login'); // Redirect to login page\n      });\n      return; // Exit early\n    }\n    // Fetch wallet balance when component mounts or user/token changes\n    fetchWalletBalance(token);\n  }, [JSON.stringify(cart.items), user, token, navigate, showCustomModal, fetchWalletBalance]); // Dependencies include stringified cart items for content change detection\n\n  // Handle input changes for delivery information form\n  const handleDeliveryInfoChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setDeliveryInfo(prevInfo => ({\n      ...prevInfo,\n      [name]: value\n    }));\n  };\n\n  // Function to initiate Paystack payment by calling your backend\n  const initiatePaystackPayment = async (orderId, amount, customerEmail) => {\n    setLoading(true); // Set loading state while payment initiation is in progress\n    setError(null); // Clear any previous errors\n\n    try {\n      // Step 1: Call your backend API to initialize the Paystack transaction\n      const response = await fetch(`${backendBaseUrl}/api/paystack/initialize`, {\n        // Using deployed backend URL\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}` // Authenticate the request with JWT token\n        },\n        body: JSON.stringify({\n          amount: amount * 100,\n          // Paystack expects amount in kobo (Nigerian cents), so multiply by 100\n          email: customerEmail,\n          orderId: orderId // Pass the internal order ID created on your backend\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to initialize Paystack transaction.');\n      }\n      const {\n        authorizationUrl\n      } = await response.json(); // Get the authorization URL from Paystack\n      console.log('Paystack authorization URL:', authorizationUrl);\n\n      // Step 2: Redirect the user's browser to the Paystack payment page\n      window.location.href = authorizationUrl;\n\n      // Note: No `setLoading(false)` here, as the page will immediately redirect.\n      // The rest of the success flow (e.g., clearing cart, showing confirmation)\n      // happens on the `OrderConfirmationPage` after Paystack redirects back.\n    } catch (err) {\n      console.error('Error initiating Paystack payment:', err);\n      setError(err.message); // Set error message\n      showCustomModal(`Paystack payment initiation failed: ${err.message}`); // Show error to user\n      setLoading(false); // Reset loading state if an error prevents redirection\n    }\n  };\n\n  // Main handler for the checkout submission\n  const handleCheckout = async e => {\n    e.preventDefault(); // Prevent default form submission\n    setLoading(true); // Set loading state\n    setError(null); // Clear previous errors\n\n    // --- Frontend Validation ---\n    if (!deliveryInfo.fullName || !deliveryInfo.address || !deliveryInfo.city || !deliveryInfo.postalCode || !deliveryInfo.country) {\n      showCustomModal('Please fill in all delivery information fields.');\n      setLoading(false);\n      return;\n    }\n    if (!user || !token) {\n      showCustomModal('You must be logged in to complete checkout. Please log in or register.', () => {\n        navigate('/login');\n      });\n      setLoading(false);\n      return;\n    }\n    if (!cart || !cart.items || cart.items.length === 0) {\n      showCustomModal('Your cart is empty. Please add items before checking out.', () => {\n        navigate('/cart');\n      });\n      setLoading(false);\n      return;\n    }\n\n    // NEW: Wallet payment specific validation\n    if (paymentMethod === 'wallet' && (!user.walletBalance || user.walletBalance < cart.totalAmount)) {\n      showCustomModal('Insufficient wallet balance. Please add funds or choose another payment method.');\n      setLoading(false);\n      return;\n    }\n    // --- End Frontend Validation ---\n\n    try {\n      // Step 1: Create the order on your backend API\n      const orderResponse = await fetch(`${backendBaseUrl}/api/orders`, {\n        // Using deployed backend URL\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}` // Authenticate the request\n        },\n        body: JSON.stringify({\n          items: cart.items.map(item => ({\n            // Ensure product ID is used, whether from `product._id` or `product` directly (for local cart items)\n            product: item.product._id || item.product,\n            quantity: item.quantity,\n            price: item.price,\n            name: item.name,\n            imageUrl: item.imageUrl\n          })),\n          totalAmount: cart.totalAmount,\n          shippingAddress: deliveryInfo,\n          paymentMethod: paymentMethod // Pass the selected payment method to the backend\n        })\n      });\n      if (!orderResponse.ok) {\n        const errorData = await orderResponse.json();\n        throw new Error(errorData.message || 'Failed to create order on backend.');\n      }\n      const orderData = await orderResponse.json();\n      console.log('Order created successfully on backend:', orderData);\n\n      // Step 2: Handle payment based on selected method\n      if (paymentMethod === 'paystack') {\n        await initiatePaystackPayment(orderData.order._id, orderData.order.totalAmount, user.email);\n      } else if (paymentMethod === 'wallet') {\n        // If payment was handled by wallet on backend, navigate to confirmation page directly\n        // Backend already deducted funds and updated order status\n        showCustomModal('Payment successful via wallet!', () => {\n          clearCart(); // Clear cart after successful wallet payment\n          fetchWalletBalance(token); // Refresh wallet balance after deduction\n          navigate('/order-confirmation', {\n            state: {\n              orderId: orderData.order._id\n            }\n          }); // Pass order ID for confirmation page\n        }, 3000); // Auto-dismiss after 3 seconds\n      }\n\n      // IMPORTANT: The page will redirect to Paystack if paymentMethod is 'paystack'.\n      // If paymentMethod is 'wallet', the modal and navigation above handle it.\n      // Do NOT clear cart or navigate here for Paystack path. That's handled by Paystack verification\n      // on the OrderConfirmationPage once the payment is confirmed.\n    } catch (err) {\n      console.error('Error during checkout process:', err);\n      setError(err.message); // Set form error\n      showCustomModal(`Checkout failed: ${err.message}`); // Show modal error\n      setLoading(false); // Reset loading state if the process fails before redirection\n    }\n  };\n\n  // Render a loading/redirect message if cart is empty, user is not logged in, or during initial checks.\n  // This prevents the flickering by providing a stable UI during transient states.\n  if (!cart || !cart.items || cart.items.length === 0 || !user || !token) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white text-gray-800 p-8 rounded-xl shadow-lg text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-2xl font-semibold mb-4\",\n          children: \"Redirecting or checking cart status...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500 mx-auto mt-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Main render for the Checkout Page\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-[#000080] p-4 sm:p-8 text-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"text-center py-8 bg-gradient-to-r from-blue-800 to-indigo-900 rounded-b-xl shadow-lg mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-4xl font-bold text-white tracking-tight\",\n        children: \"Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl text-blue-200 mt-2\",\n        children: \"Complete your purchase\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mx-auto px-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-lg p-6 md:p-8 text-gray-800\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold mb-6 text-center text-blue-700\",\n          children: \"Delivery Information & Payment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative mb-4\",\n          role: \"alert\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-bold\",\n            children: \"Error!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"block sm:inline ml-2\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold mb-4 text-gray-800\",\n              children: \"Order Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border border-gray-200 rounded-lg p-4 space-y-3 bg-gray-50\",\n              children: [cart.items.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-700\",\n                  children: [item.name, \" (x\", item.quantity, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-gray-900\",\n                  children: formatPrice(item.price * item.quantity)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 21\n                }, this)]\n              }, item.product._id || item.product, true, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 19\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border-t border-gray-200 pt-3 mt-3 flex justify-between items-center font-bold text-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Total:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: formatPrice(cart.totalAmount)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold mb-4 text-gray-800\",\n              children: \"Delivery Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleCheckout,\n              className: \"space-y-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"fullName\",\n                  className: \"block text-sm font-medium text-gray-700\",\n                  children: \"Full Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  id: \"fullName\",\n                  name: \"fullName\",\n                  value: deliveryInfo.fullName,\n                  onChange: handleDeliveryInfoChange,\n                  className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"email\",\n                  className: \"block text-sm font-medium text-gray-700\",\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"email\",\n                  id: \"email\",\n                  name: \"email\",\n                  value: deliveryInfo.email,\n                  onChange: handleDeliveryInfoChange,\n                  className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",\n                  required: true,\n                  readOnly: !!user && !!user.email // Make email read-only if user is logged in and has an email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"address\",\n                  className: \"block text-sm font-medium text-gray-700\",\n                  children: \"Address\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  id: \"address\",\n                  name: \"address\",\n                  value: deliveryInfo.address,\n                  onChange: handleDeliveryInfoChange,\n                  className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 sm:grid-cols-3 gap-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"city\",\n                    className: \"block text-sm font-medium text-gray-700\",\n                    children: \"City\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 293,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    id: \"city\",\n                    name: \"city\",\n                    value: deliveryInfo.city,\n                    onChange: handleDeliveryInfoChange,\n                    className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"postalCode\",\n                    className: \"block text-sm font-medium text-gray-700\",\n                    children: \"Postal Code\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    id: \"postalCode\",\n                    name: \"postalCode\",\n                    value: deliveryInfo.postalCode,\n                    onChange: handleDeliveryInfoChange,\n                    className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 306,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"country\",\n                    className: \"block text-sm font-medium text-gray-700\",\n                    children: \"Country\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    id: \"country\",\n                    name: \"country\",\n                    value: deliveryInfo.country,\n                    onChange: handleDeliveryInfoChange,\n                    className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 318,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-xl font-semibold mb-3 text-gray-800\",\n                  children: \"Select Payment Method\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      id: \"paystack\",\n                      name: \"paymentMethod\",\n                      value: \"paystack\",\n                      checked: paymentMethod === 'paystack',\n                      onChange: () => setPaymentMethod('paystack'),\n                      className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 336,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"paystack\",\n                      className: \"ml-3 block text-base font-medium text-gray-700\",\n                      children: \"Pay with Card / Bank Transfer (via Paystack)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 345,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      id: \"wallet\",\n                      name: \"paymentMethod\",\n                      value: \"wallet\",\n                      checked: paymentMethod === 'wallet',\n                      onChange: () => setPaymentMethod('wallet'),\n                      className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300\"\n                      // Disable wallet option if user is not logged in or has insufficient balance\n                      ,\n                      disabled: !user || (user.walletBalance || 0) < cart.totalAmount\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 352,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"wallet\",\n                      className: \"ml-3 block text-base font-medium text-gray-700\",\n                      children: [\"Pay with Wallet (Balance: \", formatPrice((user === null || user === void 0 ? void 0 : user.walletBalance) || 0), \")\", (!user || (user.walletBalance || 0) < cart.totalAmount) && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-sm text-red-500 ml-2\",\n                        children: \"(Insufficient funds or not logged in)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 366,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 363,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 351,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-300 shadow-md flex items-center justify-center\"\n                // Disable button if loading, cart empty, or user not logged in\n                ,\n                disabled: loading || !cart.items.length || !user,\n                children: loading ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                    className: \"opacity-25\",\n                    cx: \"12\",\n                    cy: \"12\",\n                    r: \"10\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 385,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                    className: \"opacity-75\",\n                    fill: \"currentColor\",\n                    d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 386,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 21\n                }, this) : `Complete Order with ${paymentMethod === 'wallet' ? 'Wallet' : 'Paystack'}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"text-center py-6 mt-8 text-blue-200 text-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\xA9 \", new Date().getFullYear(), \" Jora Mall. All rights reserved.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 215,\n    columnNumber: 5\n  }, this);\n}\n_s(CheckoutPage, \"NP03Te0gvk367j8Un3TItAcKPRo=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = CheckoutPage;\nexport default CheckoutPage;\nvar _c;\n$RefreshReg$(_c, \"CheckoutPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useAuth","jsxDEV","_jsxDEV","CheckoutPage","_s","user","token","cart","clearCart","showCustomModal","fetchWalletBalance","navigate","deliveryInfo","setDeliveryInfo","fullName","username","email","address","city","postalCode","country","paymentMethod","setPaymentMethod","loading","setLoading","error","setError","backendBaseUrl","formatPrice","price","Intl","NumberFormat","style","currency","format","items","length","JSON","stringify","handleDeliveryInfoChange","e","name","value","target","prevInfo","initiatePaystackPayment","orderId","amount","customerEmail","response","fetch","method","headers","body","ok","errorData","json","Error","message","authorizationUrl","console","log","window","location","href","err","handleCheckout","preventDefault","walletBalance","totalAmount","orderResponse","map","item","product","_id","quantity","imageUrl","shippingAddress","orderData","order","state","className","children","fileName","_jsxFileName","lineNumber","columnNumber","role","onSubmit","htmlFor","type","id","onChange","required","readOnly","checked","disabled","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","Date","getFullYear","_c","$RefreshReg$"],"sources":["C:/Users/HP/OneDrive/Desktop/SUCCESSFUL PROJECTS/Jora mall/frontend/client/src/CheckoutPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from './AuthContext'; // Import useAuth to get user, token, cart, showCustomModal, clearCart, fetchWalletBalance\r\n\r\nfunction CheckoutPage() {\r\n  const { user, token, cart, clearCart, showCustomModal, fetchWalletBalance } = useAuth(); // Get necessary context values\r\n  const navigate = useNavigate(); // Hook for navigation\r\n\r\n  // State for delivery address form\r\n  const [deliveryInfo, setDeliveryInfo] = useState({\r\n    fullName: user?.username || '', // Pre-fill with username if available (using optional chaining)\r\n    email: user?.email || '',       // Pre-fill with email if available\r\n    address: '',\r\n    city: '',\r\n    postalCode: '',\r\n    country: '',\r\n  });\r\n\r\n  const [paymentMethod, setPaymentMethod] = useState('paystack'); // Default payment method\r\n  const [loading, setLoading] = useState(false); // State for loading indicator during checkout process\r\n  const [error, setError] = useState(null);     // State for displaying error messages\r\n\r\n  // --- IMPORTANT: This URL is for your DEPLOYED backend ---\r\n  // If you redeploy your backend and its URL changes, you MUST update it here.\r\n  const backendBaseUrl = 'https://jora-mall-backend.onrender.com';\r\n\r\n  // Function to format price as Naira\r\n  const formatPrice = (price) => {\r\n    return new Intl.NumberFormat('en-NG', { style: 'currency', currency: 'NGN' }).format(price);\r\n  };\r\n\r\n  // Effect to handle initial checks: cart empty or user not logged in\r\n  useEffect(() => {\r\n    // Stringify cart.items to ensure effect only re-runs if cart content changes, not just reference\r\n    if (!cart || !cart.items || cart.items.length === 0) {\r\n      showCustomModal('Your cart is empty. Please add items before checking out.', () => {\r\n        navigate('/cart'); // Redirect to cart page\r\n      });\r\n      return; // Exit early\r\n    }\r\n    // Also handle case where user somehow lands here without being logged in (though ProtectedRoute should catch this)\r\n    if (!user || !token) {\r\n      showCustomModal('You must be logged in to proceed to checkout.', () => {\r\n        navigate('/login'); // Redirect to login page\r\n      });\r\n      return; // Exit early\r\n    }\r\n    // Fetch wallet balance when component mounts or user/token changes\r\n    fetchWalletBalance(token);\r\n  }, [JSON.stringify(cart.items), user, token, navigate, showCustomModal, fetchWalletBalance]); // Dependencies include stringified cart items for content change detection\r\n\r\n\r\n  // Handle input changes for delivery information form\r\n  const handleDeliveryInfoChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setDeliveryInfo(prevInfo => ({\r\n      ...prevInfo,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  // Function to initiate Paystack payment by calling your backend\r\n  const initiatePaystackPayment = async (orderId, amount, customerEmail) => {\r\n    setLoading(true); // Set loading state while payment initiation is in progress\r\n    setError(null);   // Clear any previous errors\r\n\r\n    try {\r\n      // Step 1: Call your backend API to initialize the Paystack transaction\r\n      const response = await fetch(`${backendBaseUrl}/api/paystack/initialize`, { // Using deployed backend URL\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`, // Authenticate the request with JWT token\r\n        },\r\n        body: JSON.stringify({\r\n          amount: amount * 100, // Paystack expects amount in kobo (Nigerian cents), so multiply by 100\r\n          email: customerEmail,\r\n          orderId: orderId, // Pass the internal order ID created on your backend\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.message || 'Failed to initialize Paystack transaction.');\r\n      }\r\n\r\n      const { authorizationUrl } = await response.json(); // Get the authorization URL from Paystack\r\n      console.log('Paystack authorization URL:', authorizationUrl);\r\n\r\n      // Step 2: Redirect the user's browser to the Paystack payment page\r\n      window.location.href = authorizationUrl;\r\n\r\n      // Note: No `setLoading(false)` here, as the page will immediately redirect.\r\n      // The rest of the success flow (e.g., clearing cart, showing confirmation)\r\n      // happens on the `OrderConfirmationPage` after Paystack redirects back.\r\n\r\n    } catch (err) {\r\n      console.error('Error initiating Paystack payment:', err);\r\n      setError(err.message); // Set error message\r\n      showCustomModal(`Paystack payment initiation failed: ${err.message}`); // Show error to user\r\n      setLoading(false); // Reset loading state if an error prevents redirection\r\n    }\r\n  };\r\n\r\n\r\n  // Main handler for the checkout submission\r\n  const handleCheckout = async (e) => {\r\n    e.preventDefault(); // Prevent default form submission\r\n    setLoading(true);   // Set loading state\r\n    setError(null);     // Clear previous errors\r\n\r\n    // --- Frontend Validation ---\r\n    if (!deliveryInfo.fullName || !deliveryInfo.address || !deliveryInfo.city || !deliveryInfo.postalCode || !deliveryInfo.country) {\r\n      showCustomModal('Please fill in all delivery information fields.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (!user || !token) {\r\n      showCustomModal('You must be logged in to complete checkout. Please log in or register.', () => {\r\n        navigate('/login');\r\n      });\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (!cart || !cart.items || cart.items.length === 0) {\r\n      showCustomModal('Your cart is empty. Please add items before checking out.', () => {\r\n        navigate('/cart');\r\n      });\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // NEW: Wallet payment specific validation\r\n    if (paymentMethod === 'wallet' && (!user.walletBalance || user.walletBalance < cart.totalAmount)) {\r\n      showCustomModal('Insufficient wallet balance. Please add funds or choose another payment method.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    // --- End Frontend Validation ---\r\n\r\n    try {\r\n      // Step 1: Create the order on your backend API\r\n      const orderResponse = await fetch(`${backendBaseUrl}/api/orders`, { // Using deployed backend URL\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`, // Authenticate the request\r\n        },\r\n        body: JSON.stringify({\r\n          items: cart.items.map(item => ({\r\n            // Ensure product ID is used, whether from `product._id` or `product` directly (for local cart items)\r\n            product: item.product._id || item.product,\r\n            quantity: item.quantity,\r\n            price: item.price,\r\n            name: item.name,\r\n            imageUrl: item.imageUrl\r\n          })),\r\n          totalAmount: cart.totalAmount,\r\n          shippingAddress: deliveryInfo,\r\n          paymentMethod: paymentMethod, // Pass the selected payment method to the backend\r\n        }),\r\n      });\r\n\r\n      if (!orderResponse.ok) {\r\n        const errorData = await orderResponse.json();\r\n        throw new Error(errorData.message || 'Failed to create order on backend.');\r\n      }\r\n\r\n      const orderData = await orderResponse.json();\r\n      console.log('Order created successfully on backend:', orderData);\r\n\r\n      // Step 2: Handle payment based on selected method\r\n      if (paymentMethod === 'paystack') {\r\n        await initiatePaystackPayment(orderData.order._id, orderData.order.totalAmount, user.email);\r\n      } else if (paymentMethod === 'wallet') {\r\n        // If payment was handled by wallet on backend, navigate to confirmation page directly\r\n        // Backend already deducted funds and updated order status\r\n        showCustomModal('Payment successful via wallet!', () => {\r\n          clearCart(); // Clear cart after successful wallet payment\r\n          fetchWalletBalance(token); // Refresh wallet balance after deduction\r\n          navigate('/order-confirmation', { state: { orderId: orderData.order._id } }); // Pass order ID for confirmation page\r\n        }, 3000); // Auto-dismiss after 3 seconds\r\n      }\r\n\r\n      // IMPORTANT: The page will redirect to Paystack if paymentMethod is 'paystack'.\r\n      // If paymentMethod is 'wallet', the modal and navigation above handle it.\r\n      // Do NOT clear cart or navigate here for Paystack path. That's handled by Paystack verification\r\n      // on the OrderConfirmationPage once the payment is confirmed.\r\n\r\n    } catch (err) {\r\n      console.error('Error during checkout process:', err);\r\n      setError(err.message); // Set form error\r\n      showCustomModal(`Checkout failed: ${err.message}`); // Show modal error\r\n      setLoading(false); // Reset loading state if the process fails before redirection\r\n    }\r\n  };\r\n\r\n  // Render a loading/redirect message if cart is empty, user is not logged in, or during initial checks.\r\n  // This prevents the flickering by providing a stable UI during transient states.\r\n  if (!cart || !cart.items || cart.items.length === 0 || !user || !token) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-[#000080] p-4 text-white\">\r\n        <div className=\"bg-white text-gray-800 p-8 rounded-xl shadow-lg text-center\">\r\n          <p className=\"text-2xl font-semibold mb-4\">Redirecting or checking cart status...</p>\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500 mx-auto mt-4\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Main render for the Checkout Page\r\n  return (\r\n    <div className=\"min-h-screen bg-[#000080] p-4 sm:p-8 text-white\">\r\n      <header className=\"text-center py-8 bg-gradient-to-r from-blue-800 to-indigo-900 rounded-b-xl shadow-lg mb-8\">\r\n        <h1 className=\"text-4xl font-bold text-white tracking-tight\">Checkout</h1>\r\n        <p className=\"text-xl text-blue-200 mt-2\">Complete your purchase</p>\r\n      </header>\r\n\r\n      <main className=\"container mx-auto px-4\">\r\n        <div className=\"bg-white rounded-xl shadow-lg p-6 md:p-8 text-gray-800\">\r\n          <h2 className=\"text-2xl font-bold mb-6 text-center text-blue-700\">Delivery Information & Payment</h2>\r\n\r\n          {error && (\r\n            <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative mb-4\" role=\"alert\">\r\n              <strong className=\"font-bold\">Error!</strong>\r\n              <span className=\"block sm:inline ml-2\">{error}</span>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n            {/* Order Summary Section */}\r\n            <div>\r\n              <h3 className=\"text-xl font-semibold mb-4 text-gray-800\">Order Summary</h3>\r\n              <div className=\"border border-gray-200 rounded-lg p-4 space-y-3 bg-gray-50\">\r\n                {cart.items.map(item => (\r\n                  <div key={item.product._id || item.product} className=\"flex justify-between items-center text-sm\">\r\n                    <span className=\"text-gray-700\">{item.name} (x{item.quantity})</span>\r\n                    <span className=\"font-medium text-gray-900\">{formatPrice(item.price * item.quantity)}</span>\r\n                  </div>\r\n                ))}\r\n                <div className=\"border-t border-gray-200 pt-3 mt-3 flex justify-between items-center font-bold text-lg\">\r\n                  <span>Total:</span>\r\n                  <span>{formatPrice(cart.totalAmount)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Delivery Information Form */}\r\n            <div>\r\n              <h3 className=\"text-xl font-semibold mb-4 text-gray-800\">Delivery Details</h3>\r\n              <form onSubmit={handleCheckout} className=\"space-y-4\">\r\n                <div>\r\n                  <label htmlFor=\"fullName\" className=\"block text-sm font-medium text-gray-700\">Full Name</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"fullName\"\r\n                    name=\"fullName\"\r\n                    value={deliveryInfo.fullName}\r\n                    onChange={handleDeliveryInfoChange}\r\n                    className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">Email</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    id=\"email\"\r\n                    name=\"email\"\r\n                    value={deliveryInfo.email}\r\n                    onChange={handleDeliveryInfoChange}\r\n                    className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                    required\r\n                    readOnly={!!user && !!user.email} // Make email read-only if user is logged in and has an email\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label htmlFor=\"address\" className=\"block text-sm font-medium text-gray-700\">Address</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"address\"\r\n                    name=\"address\"\r\n                    value={deliveryInfo.address}\r\n                    onChange={handleDeliveryInfoChange}\r\n                    className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\r\n                  <div>\r\n                    <label htmlFor=\"city\" className=\"block text-sm font-medium text-gray-700\">City</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"city\"\r\n                      name=\"city\"\r\n                      value={deliveryInfo.city}\r\n                      onChange={handleDeliveryInfoChange}\r\n                      className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"postalCode\" className=\"block text-sm font-medium text-gray-700\">Postal Code</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"postalCode\"\r\n                      name=\"postalCode\"\r\n                      value={deliveryInfo.postalCode}\r\n                      onChange={handleDeliveryInfoChange}\r\n                      className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"country\" className=\"block text-sm font-medium text-gray-700\">Country</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"country\"\r\n                      name=\"country\"\r\n                      value={deliveryInfo.country}\r\n                      onChange={handleDeliveryInfoChange}\r\n                      className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* NEW: Payment Method Selection */}\r\n                <div className=\"mt-6\">\r\n                  <h3 className=\"text-xl font-semibold mb-3 text-gray-800\">Select Payment Method</h3>\r\n                  <div className=\"space-y-3\">\r\n                    {/* Paystack Option */}\r\n                    <div className=\"flex items-center\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        id=\"paystack\"\r\n                        name=\"paymentMethod\"\r\n                        value=\"paystack\"\r\n                        checked={paymentMethod === 'paystack'}\r\n                        onChange={() => setPaymentMethod('paystack')}\r\n                        className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300\"\r\n                      />\r\n                      <label htmlFor=\"paystack\" className=\"ml-3 block text-base font-medium text-gray-700\">\r\n                        Pay with Card / Bank Transfer (via Paystack)\r\n                      </label>\r\n                    </div>\r\n\r\n                    {/* Wallet Option */}\r\n                    <div className=\"flex items-center\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        id=\"wallet\"\r\n                        name=\"paymentMethod\"\r\n                        value=\"wallet\"\r\n                        checked={paymentMethod === 'wallet'}\r\n                        onChange={() => setPaymentMethod('wallet')}\r\n                        className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300\"\r\n                        // Disable wallet option if user is not logged in or has insufficient balance\r\n                        disabled={!user || (user.walletBalance || 0) < cart.totalAmount}\r\n                      />\r\n                      <label htmlFor=\"wallet\" className=\"ml-3 block text-base font-medium text-gray-700\">\r\n                        Pay with Wallet (Balance: {formatPrice(user?.walletBalance || 0)})\r\n                        {(!user || (user.walletBalance || 0) < cart.totalAmount) && (\r\n                          <span className=\"text-sm text-red-500 ml-2\">\r\n                            (Insufficient funds or not logged in)\r\n                          </span>\r\n                        )}\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n\r\n                {/* Payment button */}\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-300 shadow-md flex items-center justify-center\"\r\n                  // Disable button if loading, cart empty, or user not logged in\r\n                  disabled={loading || !cart.items.length || !user}\r\n                >\r\n                  {loading ? (\r\n                    <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                    </svg>\r\n                  ) : `Complete Order with ${paymentMethod === 'wallet' ? 'Wallet' : 'Paystack'}`}\r\n                </button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      <footer className=\"text-center py-6 mt-8 text-blue-200 text-sm\">\r\n        <p>&copy; {new Date().getFullYear()} Jora Mall. All rights reserved.</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CheckoutPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}